(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4562],{96471:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var i=r(n(64938)),s=n(85893),a=(0,i.default)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined");t.Z=a},21386:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var i=r(n(64938)),s=n(85893),a=(0,i.default)((0,s.jsx)("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"CheckRounded");t.Z=a},64938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(15227)},75158:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(63366),i=n(87462),s=n(67294),a=n(86010),o=n(94780),l=n(41796),c=n(37743),d=n(54235),x=n(85893),u=(0,d.Z)((0,x.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.Z)((0,x.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.Z)((0,x.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=n(36622),v=n(78884),j=n(81719),f=n(34867);function b(e){return(0,f.Z)("MuiCheckbox",e)}var g=(0,n(1588).Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);const y=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Z=(0,j.ZP)(c.Z,{shouldForwardProp:e=>(0,j.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,p.Z)(n.color)}`]]}})((({theme:e,ownerState:t})=>(0,i.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,l.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${g.checked}, &.${g.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled}}))),w=(0,x.jsx)(h,{}),C=(0,x.jsx)(u,{}),k=(0,x.jsx)(m,{});var S=s.forwardRef((function(e,t){var n,l;const c=(0,v.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:u="primary",icon:h=C,indeterminate:m=!1,indeterminateIcon:j=k,inputProps:f,size:g="medium",className:S}=c,A=(0,r.Z)(c,y),I=m?j:h,O=m?j:d,P=(0,i.Z)({},c,{color:u,indeterminate:m,size:g}),T=(e=>{const{classes:t,indeterminate:n,color:r}=e,s={root:["root",n&&"indeterminate",`color${(0,p.Z)(r)}`]},a=(0,o.Z)(s,b,t);return(0,i.Z)({},t,a)})(P);return(0,x.jsx)(Z,(0,i.Z)({type:"checkbox",inputProps:(0,i.Z)({"data-indeterminate":m},f),icon:s.cloneElement(I,{fontSize:null!=(n=I.props.fontSize)?n:g}),checkedIcon:s.cloneElement(O,{fontSize:null!=(l=O.props.fontSize)?l:g}),ownerState:P,ref:t,className:(0,a.default)(T.root,S)},A,{classes:T}))}))},46207:function(e,t,n){"use strict";var r=n(49064);t.Z=r.Z},15227:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return s.Z},createSvgIcon:function(){return a.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return c.Z},ownerDocument:function(){return d.Z},ownerWindow:function(){return x.Z},requirePropFactory:function(){return u},setRef:function(){return h},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return m.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return v},useControlled:function(){return j.Z},useEventCallback:function(){return f.Z},useForkRef:function(){return b.Z},useIsFocusVisible:function(){return g.Z}});var r=n(37078),i=n(36622),s=n(46207),a=n(54235),o=n(75400);var l=function(e,t){return()=>null},c=n(7335),d=n(47505),x=n(57577);n(87462);var u=function(e,t){return()=>null},h=n(7960).Z,m=n(63289),p=n(49669);var v=function(e,t,n,r,i){return null},j=n(42293),f=n(26432),b=n(84771),g=n(40011);const y={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},24756:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Oe}});var r,i=n(49501),s=n(62097),a=n(61225),o=n(30120),l=n(44373),c=n(5152),d=n(67294),x=n(45745),u=n(15446),h=n(34220),m=n(43478),p=n(22454),v=n(92908),j=n(77537),f=n(26079),b=n(1279),g=n(58771),y=n(70918),Z=n(22841),w=n(75158),C=n(29630),k=n(75084),S=n(81645),A=n(25563),I=n(92391),O=n(69331),P=n(18384),T=n(8195),M=n(46930),D=n(80227),B=n(91655),N=n(96875),_=n(85893),R=function(e){var t=e.caption,n=e.hfCurrent,r=e.hfAfter,s=e.loading;return(0,_.jsx)(I.X,{caption:t,sx:{mb:{xs:3,lg:4},"&:last-of-type":{mb:0}},captionVariant:"description",children:(0,_.jsxs)(o.Z,{sx:{textAlign:"right"},children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[s?(0,_.jsx)(B.Z,{width:50}):(0,_.jsx)(N.o,{value:n}),(0,_.jsx)(S.Z,{sx:{fontSize:"16px",color:"text.primary",mx:1},children:(0,_.jsx)(D.Z,{})}),s?(0,_.jsx)(B.Z,{width:50}):(0,_.jsx)(N.o,{value:r})]}),(0,_.jsxs)(C.Z,{variant:"helperText",color:"text.secondary",children:[(0,_.jsx)(i.cC,{id:"Liquidation at"})," <1.0"]})]})})};!function(e){e[e.NO_SELECTION=0]="NO_SELECTION",e[e.V2_HF_TOO_LOW=1]="V2_HF_TOO_LOW",e[e.V3_HF_TOO_LOW=2]="V3_HF_TOO_LOW",e[e.INSUFFICIENT_LTV=3]="INSUFFICIENT_LTV"}(r||(r={}));var E=function(e){var t=e.hfV2Current,n=e.hfV2AfterChange,l=e.hfV3Current,c=e.v3SummaryAfterMigration,x=e.disableButton,u=e.enteringIsolationMode,h=e.loading,m=(0,s.Z)().breakpoints,p=(0,a.Z)(m.down("sm")),v=(0,M.f)().currentMarket,j=(0,A.hu)(v).market,f=(0,T.vR)().openV3Migration,D=(0,d.useState)(!1),B=D[0],N=D[1],E=c.healthFactor,V=c.totalCollateralMarketReferenceCurrency,z=c.totalBorrowsMarketReferenceCurrency,L=c.currentLoanToValue,F=(0,b.hE)(V).multipliedBy(L),W=(0,b.hE)(z).isGreaterThan(F),U=void 0;x&&B?U=r.NO_SELECTION:Number(n)<1.005&&"-1"!==n?U=r.V2_HF_TOO_LOW:Number(E)<1.005&&"-1"!==E?U=r.V3_HF_TOO_LOW:W&&(U=r.INSUFFICIENT_LTV);var H=function(){switch(U){case r.NO_SELECTION:return(0,_.jsx)(i.cC,{id:"No assets selected to migrate."});case r.V2_HF_TOO_LOW:return(0,_.jsx)(i.cC,{id:"This action will reduce V2 health factor below liquidation threshold. retain collateral or migrate borrow position to continue."});case r.V3_HF_TOO_LOW:return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(i.cC,{id:"This action will reduce health factor of V3 below liquidation threshold. Increase migrated collateral or reduce migrated borrow to continue."})});case r.INSUFFICIENT_LTV:return(0,_.jsx)(i.cC,{id:"The loan to value of the migrated positions would cause liquidation. Increase migrated collateral or reduce migrated borrow to continue."});default:return(0,_.jsx)(_.Fragment,{})}};return(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:{xs:"column-reverse",md:"row"},alignItems:"flex-start",justifyContent:"space-between"},children:[(0,_.jsxs)(y.Z,{sx:{p:p?"20px 16px":"20px 30px",mb:{xs:6,md:0},width:{xs:"100%",md:"45%",lg:"35%"}},children:[(0,_.jsx)(I.X,{caption:(0,_.jsx)(i.cC,{id:"Review changes to continue"}),captionVariant:"h3",sx:{mb:6}}),(0,_.jsx)(R,{caption:(0,_.jsx)(i.cC,{id:"Health Factor ({0} v2)",values:{0:j.marketTitle}}),hfCurrent:t,hfAfter:n,loading:h}),(0,_.jsx)(R,{caption:(0,_.jsx)(i.cC,{id:"Health Factor ({0} v3)",values:{0:"Ethereum AMM"===j.marketTitle?"Ethereum":j.marketTitle}}),hfCurrent:l,hfAfter:E,loading:h}),void 0!==U&&(0,_.jsx)(O.v,{severity:"warning",children:(0,_.jsx)(H,{})}),u&&(0,_.jsx)(P.i,{severity:"warning"}),void 0===U&&(0,_.jsx)(o.Z,{sx:{height:"44px",backgroundColor:"background.surface",borderRadius:"4px",display:"flex",justifyContent:"center",mb:4},"data-cy":"migration-risk-checkbox",children:(0,_.jsx)(Z.Z,{sx:{margin:0},control:(0,_.jsx)(w.Z,{checked:B,onChange:function(){return N(!B)},size:"small"}),label:(0,_.jsx)(C.Z,{variant:"description",sx:{position:"relative",top:1},children:(0,_.jsx)(i.cC,{id:"I fully understand the risks of migrating."})})})}),(0,_.jsx)(o.Z,{children:(0,_.jsx)(k.Z,{onClick:f,disabled:!B||void 0!==U,sx:{width:"100%",height:"44px"},variant:B&&void 0===U?"gradient":"contained",size:"medium","data-cy":"migration-button",children:(0,_.jsx)(i.cC,{id:"Preview tx and migrate"})})})]}),(0,_.jsxs)(o.Z,{sx:{width:{xs:"100%",md:"50%",lg:"60%"},p:p?"20px 16px":"20px 30px",mt:p?4:0},children:[(0,_.jsxs)(C.Z,{variant:"h3",sx:{fontWeight:700,mb:{xs:4,lg:6},display:"flex",alignItems:"center"},children:[(0,_.jsx)(S.Z,{sx:{fontSize:"24px",color:"warning.main",mr:2},children:(0,_.jsx)(g.Z,{})}),(0,_.jsx)(i.cC,{id:"Migration risks"})]}),(0,_.jsx)(C.Z,{sx:{mb:{xs:3,lg:4}},children:(0,_.jsx)(i.cC,{id:"Please always be aware of your <0>Health Factor (HF)</0> when partially migrating a position and that your rates will be updated to V3 rates.",components:{0:(0,_.jsx)("b",{})}})}),(0,_.jsx)(C.Z,{sx:{mb:{xs:3,lg:4}},children:(0,_.jsx)(i.cC,{id:"Migrating multiple collaterals and borrowed assets at the same time can be an expensive operation and might fail in certain situations.<0>Therefore it\u2019s not recommended to migrate positions with more than 5 assets (deposited + borrowed) at the same time.</0>",components:{0:(0,_.jsx)("b",{})}})}),(0,_.jsx)(C.Z,{sx:{mb:{xs:4,lg:6}},children:(0,_.jsx)(i.cC,{id:"Be mindful of the network congestion and gas prices."})})]})]})},V=n(75331),z=n(13902),L=n(58057),F=n(21386),W=n(52906),U=n(59499),H=n(67728),Y=n(68861),q=n(58527),J=function(e){var t,n=e.dashboardLink,r=e.marketName,s=e.warningType,a=e.isolatedV3,o=(t={},(0,U.Z)(t,H.b_.EModeBorrowDisabled,(0,_.jsx)(i.cC,{id:"Asset cannot be migrated to {marketName} V3 Market due to E-mode restrictions. You can disable or manage E-mode categories in your <0>V3 Dashboard</0>",values:{marketName:r},components:{0:(0,_.jsx)(Y.rU,{href:n||"",target:"_blank",underline:"always"})}})),(0,U.Z)(t,H.b_.AssetNotFlashloanable,(0,_.jsx)(i.cC,{id:"Flashloan is disabled for this asset, hence this position cannot be migrated."})),(0,U.Z)(t,H.b_.InsufficientLiquidity,(0,_.jsx)(i.cC,{id:"Asset cannot be migrated due to insufficient liquidity or borrow cap limitation in {marketName} v3 market.",values:{marketName:r}})),(0,U.Z)(t,H.b_.NotEnoughtSupplies,(0,_.jsx)(i.cC,{id:"Asset cannot be migrated due to supply cap restriction in {marketName} v3 market.",values:{marketName:r}})),(0,U.Z)(t,H.b_.ReserveFrozen,(0,_.jsx)(i.cC,{id:"Asset is frozen in {marketName} v3 market, hence this position cannot be migrated.",values:{marketName:r}})),(0,U.Z)(t,H.b_.IsolationModeBorrowDisabled,a?(0,_.jsx)(i.cC,{id:"Asset cannot be migrated because you have isolated collateral in {marketName} v3 Market which limits borrowable assets. You can manage your collateral in <0>{marketName} V3 Dashboard</0>",values:{marketName:r},components:{0:(0,_.jsx)(Y.rU,{href:n||"",target:"_blank",underline:"always"})}}):(0,_.jsx)(i.cC,{id:"Asset cannot be migrated to {marketName} v3 Market since collateral asset will enable isolation mode.",values:{marketName:r}})),(0,U.Z)(t,H.b_.V3AssetMissing,(0,_.jsx)(i.cC,{id:"Underlying asset does not exist in {marketName} v3 Market, hence this position cannot be migrated.",values:{marketName:r}})),t);return(0,_.jsx)(q.G,{iconSize:16,color:"error.main",icon:(0,_.jsx)(g.Z,{}),children:(0,_.jsx)(C.Z,{variant:"caption",color:"text.secondary",children:o[s]})})},$=n(44749),G=n(45884),X=n(32383),K=n(41024),Q=n(14463),ee=n(72667),te=n(8656),ne=n(54181),re=function(e){var t=e.enableAsCollateral,n=e.enabledAsCollateral;return(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,_.jsx)(ne.Z,{onClick:t,disableRipple:!0,checked:n,sx:{mb:-1.5}}),(0,_.jsx)($.Ch,{})]})},ie=function(e){var t=e.v2Amount,n=e.v2Price,r=e.v3Price,s=(0,d.useMemo)((function(){return function(e,t,n){if(!n)return{v3Amount:void 0,v3TotalPrice:void 0};var r=(0,b.hE)(t).div(n).multipliedBy(e),i=r.multipliedBy(n);return{v3Amount:r.toString(),v3TotalPrice:i.toString()}}(t,n,r)}),[t,n,r]),a=s.v3Amount,o=s.v3TotalPrice;return(0,_.jsx)(O.v,{icon:!1,sx:{mb:4},severity:"error",children:(0,_.jsxs)(C.Z,{variant:"caption",component:"span",children:[(0,_.jsx)(i.cC,{id:"stETH tokens will be migrated to Wrapped stETH using Lido Protocol wrapper which leads to supply balance change after migration: {0}",values:{0:a?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(K.B,{variant:"caption",value:a})," (",(0,_.jsx)(K.B,{variant:"caption",value:o,symbol:"USD",symbolsColor:"error.100"}),")."]}):(0,_.jsx)(Q.J,{variant:"caption",component:"span"})}})," "]})})},se=function(e){var t=e.checked,n=e.amount,r=e.amountInUSD,a=e.onCheckboxClick,l=e.enabledAsCollateral,c=e.disabled,d=e.enableAsCollateral,x=e.isIsolated,u=e.enteringIsolation,h=e.borrowApyType,m=e.userReserve,p=e.v3Rates,v=e.showCollateralToggle,j=e.isSupplyList,f=h?h===V.tk.Stable?m.stableBorrowAPY:m.reserve.variableBorrowAPY:m.reserve.supplyAPY,b=h?h===V.tk.Stable?m.reserve.sIncentivesData:m.reserve.vIncentivesData:m.reserve.aIncentivesData,g=h?(null===p||void 0===p?void 0:p.variableBorrowAPY)||"-1":(null===p||void 0===p?void 0:p.supplyAPY)||"-1",y=h?(null===p||void 0===p?void 0:p.vIncentivesData)||[]:(null===p||void 0===p?void 0:p.aIncentivesData)||[],Z=(0,te.Yh)(),w=Z.currentMarket,A=Z.currentMarketData,O=(0,s.Z)(),P=void 0===c?"text.secondary":"text.muted",T=void 0===c?"text.primary":"text.muted",M=void 0===(null===p||void 0===p?void 0:p.ltv)&&void 0===(null===p||void 0===p?void 0:p.liquidationThreshold);return(0,_.jsxs)(X.H,{sx:{display:"flex",flexDirection:"column",pl:0},children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",width:"100%",pb:2,pt:2.5},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:48,minWidth:48,children:(0,_.jsx)(o.Z,{sx:function(e){return{border:"2px solid ".concat(void 0!==c?e.palette.action.disabled:e.palette.text.secondary),background:void 0!==c?e.palette.background.disabled:t?e.palette.text.secondary:e.palette.background.paper,width:16,height:16,borderRadius:"2px","&:hover":{cursor:void 0!==c?"not-allowed":"pointer"},display:"flex",alignItems:"center",justifyContent:"center"}},onClick:void 0!==c?void 0:a,children:void 0===c&&(0,_.jsx)(S.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,_.jsx)(L.Z,{})})})}),(0,_.jsx)(G.h,{align:"left",children:(0,_.jsxs)(I.X,{children:[(0,_.jsx)(ee.T1,{symbol:m.reserve.iconSymbol,fontSize:"large"}),(0,_.jsxs)(o.Z,{sx:{pl:"12px",overflow:"hidden",display:"flex"},children:[(0,_.jsx)(C.Z,{variant:"subheader1",color:T,noWrap:!0,sx:{pr:1},children:m.reserve.symbol}),void 0!==c&&(0,_.jsx)(J,{dashboardLink:Y.Z6.dashboard+"/?marketName="+w+"_v3",marketName:A.marketTitle,warningType:c,isolatedV3:u})]})]})})]}),(0,_.jsxs)(o.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,pb:4,pl:12},children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"Current v2 Balance"})}),(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,_.jsx)(o.Z,{sx:{display:"flex",alignItems:"flex-end",mb:.5},children:(0,_.jsx)(K.B,{value:n,variant:"secondary14",color:T})}),(0,_.jsx)(K.B,{value:r,variant:"secondary12",color:P,symbolsColor:P,symbol:"USD"})]})]}),(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"APY change"})}),(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(W.J,{value:f,symbol:m.reserve.symbol,incentives:b,variant:"main14",color:T}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===c?O.palette.text.secondary:O.palette.text.muted})}),(0,_.jsx)(W.J,{value:g,symbol:m.reserve.symbol,incentives:y,variant:"main14",color:T})]})]}),!!d&&(0,_.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"Collateral change"})}),(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[m.usageAsCollateralEnabledOnUser&&"0"!==m.reserve.reserveLiquidationThreshold?(0,_.jsx)(F.Z,{fontSize:"small",color:"success"}):(0,_.jsx)(Q.J,{variant:"main14",color:P}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===c?O.palette.text.secondary:O.palette.text.muted})}),v?(0,_.jsx)(re,{enableAsCollateral:d,enabledAsCollateral:l}):l?x?(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,_.jsx)(S.Z,{sx:{color:"warning.main",fontSize:"20px"},children:(0,_.jsx)(z.Z,{})}),(0,_.jsx)($.Ch,{})]}):(0,_.jsx)(F.Z,{fontSize:"small",color:"success"}):(0,_.jsx)(Q.J,{variant:"main14",color:P})]})]}),!!h&&(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"APY type change"})}),(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(k.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,_.jsx)(C.Z,{variant:"buttonS",color:T,children:h})}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===c?O.palette.text.secondary:O.palette.text.muted})}),(0,_.jsx)(k.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,_.jsx)(C.Z,{variant:"buttonS",color:T,children:"Variable"})})]})]}),j&&(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"Max LTV"})}),(0,_.jsx)(o.Z,{sx:{display:"flex"},children:M?(0,_.jsx)(Q.J,{variant:"main14",color:"text.secondary"}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(K.B,{value:m.reserve.formattedBaseLTVasCollateral,percent:!0,variant:"main14",color:T}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===c?O.palette.text.secondary:O.palette.text.muted})}),(0,_.jsx)(K.B,{value:(null===p||void 0===p?void 0:p.ltv)||0,percent:!0,variant:"main14",color:T})]})})]}),!j&&(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(C.Z,{variant:"description",color:P,children:(0,_.jsx)(i.cC,{id:"Liquidation threshold"})}),(0,_.jsx)(o.Z,{sx:{display:"flex"},children:M?(0,_.jsx)(Q.J,{variant:"main14",color:"text.secondary"}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(K.B,{value:m.reserve.formattedReserveLiquidationThreshold,percent:!0,variant:"main14",color:T}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===c?O.palette.text.secondary:O.palette.text.muted})}),(0,_.jsx)(K.B,{value:(null===p||void 0===p?void 0:p.liquidationThreshold)||0,percent:!0,variant:"main14",color:T})]})})]})]}),"stETH"===m.reserve.symbol&&(0,_.jsx)(o.Z,{sx:{pl:"16px",width:"100%"},children:(0,_.jsx)(ie,{v2Price:m.reserve.priceInUSD,v2Amount:n,v3Price:null===p||void 0===p?void 0:p.priceInUSD})})]})},ae=function(e){var t,n=e.checked,r=e.amount,i=e.amountInUSD,l=e.onCheckboxClick,c=e.enabledAsCollateral,d=e.disabled,x=e.enableAsCollateral,u=e.isIsolated,h=e.enteringIsolation,m=e.borrowApyType,p=e.userReserve,v=e.v3Rates,j=e.userControlledCollateral,f=e.canBeEnforced,b=e.isSupplyList,g=(0,s.Z)(),y=(0,te.Yh)(),Z=y.currentMarket,w=y.currentMarketData,A=(0,a.Z)(g.breakpoints.down(1125)),I=void 0===d?"text.primary":"text.muted",O=void 0===d?"text.secondary":"text.muted",P=void 0===(null===v||void 0===v?void 0:v.ltv)&&void 0===(null===v||void 0===v?void 0:v.liquidationThreshold),T=m?m===V.tk.Stable?p.stableBorrowAPY:p.reserve.variableBorrowAPY:p.reserve.supplyAPY,M=m?m===V.tk.Stable?p.reserve.sIncentivesData:p.reserve.vIncentivesData:p.reserve.aIncentivesData,B=m?(null===v||void 0===v?void 0:v.variableBorrowAPY)||"-1":(null===v||void 0===v?void 0:v.supplyAPY)||"-1",N=m?(null===v||void 0===v?void 0:v.vIncentivesData)||[]:(null===v||void 0===v?void 0:v.aIncentivesData)||[],R=j&&u&&f;return A?(0,_.jsx)(se,{checked:n,amount:r,amountInUSD:i,onCheckboxClick:l,enabledAsCollateral:c,disabled:d,enableAsCollateral:x,isIsolated:u,enteringIsolation:h,borrowApyType:m,userReserve:p,v3Rates:v,showCollateralToggle:R,isSupplyList:b}):(0,_.jsxs)(X.H,{sx:{flexDirection:"column",pl:0},"data-cy":"migration-".concat(void 0!==m?"borrow-"+m:"supply","-").concat(p.reserve.symbol),children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",my:4},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:64,minWidth:64,children:(0,_.jsx)(o.Z,{sx:function(e){return{border:"2px solid ".concat(void 0!==d?e.palette.action.disabled:e.palette.text.secondary),background:void 0!==d?e.palette.background.disabled:n?e.palette.text.secondary:e.palette.background.paper,width:16,height:16,borderRadius:"2px","&:hover":{cursor:void 0!==d?"not-allowed":"pointer"},display:"flex",alignItems:"center",justifyContent:"center"}},onClick:void 0!==d?void 0:l,"data-cy":"migration-checkbox",children:void 0===d&&(0,_.jsx)(S.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,_.jsx)(L.Z,{})})})}),(0,_.jsxs)(G.h,{isRow:!0,maxWidth:250,minWidth:170,children:[(0,_.jsx)(ee.T1,{symbol:p.reserve.iconSymbol,fontSize:"large"}),(0,_.jsxs)(o.Z,{sx:{pl:"12px",overflow:"hidden",display:"flex"},children:[(0,_.jsx)(C.Z,{variant:"subheader1",color:I,noWrap:!0,sx:{pr:1},children:p.reserve.symbol}),void 0!==d&&(0,_.jsx)(J,{dashboardLink:Y.Z6.dashboard+"/?marketName="+Z+"_v3",marketName:w.marketTitle,warningType:d,isolatedV3:!h})]})]}),(0,_.jsx)(G.h,{children:(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(W.J,{value:T,symbol:p.reserve.symbol,incentives:M,variant:"main14",color:I}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===d?g.palette.text.primary:g.palette.text.muted})}),(0,_.jsx)(W.J,{value:B,symbol:p.reserve.symbol,incentives:N,variant:"main14",color:I})]})}),!!x&&(0,_.jsx)(G.h,{children:(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[p.usageAsCollateralEnabledOnUser&&"0"!==p.reserve.reserveLiquidationThreshold?(0,_.jsx)(F.Z,{fontSize:"small",color:"success"}):(0,_.jsx)(Q.J,{variant:"main14",color:O}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===d?g.palette.text.primary:g.palette.text.muted})}),R?(0,_.jsx)(re,{enableAsCollateral:x,enabledAsCollateral:c}):c?u?(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,_.jsx)(S.Z,{sx:{color:"warning.main",fontSize:"20px"},children:(0,_.jsx)(z.Z,{})}),(0,_.jsx)($.Ch,{})]}):(0,_.jsx)(F.Z,{fontSize:"small",color:"success"}):(0,_.jsx)(Q.J,{variant:"main14",color:O})]})}),b&&(P?(0,_.jsx)(G.h,{children:(0,_.jsx)(Q.J,{variant:"main14",color:"text.secondary"})}):(0,_.jsx)(G.h,{children:(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(K.B,{value:p.reserve.formattedBaseLTVasCollateral,percent:!0,variant:"secondary14",color:I}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===d?g.palette.text.primary:g.palette.text.muted})}),(0,_.jsx)(K.B,{value:(null===v||void 0===v?void 0:v.ltv)||0,percent:!0,variant:"secondary14",color:I})]})})),!!m&&(0,_.jsx)(G.h,{children:(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(k.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,_.jsx)(C.Z,{variant:"buttonS",color:I,children:m})}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===d?g.palette.text.primary:g.palette.text.muted})}),(0,_.jsx)(k.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,_.jsx)(C.Z,{variant:"buttonS",color:I,children:"Variable"})})]})}),!b&&(P?(0,_.jsx)(G.h,{children:(0,_.jsx)(Q.J,{variant:"main14",color:"text.secondary"})}):(0,_.jsx)(G.h,{children:(0,_.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,_.jsx)(K.B,{value:p.reserve.formattedReserveLiquidationThreshold,percent:!0,variant:"secondary14",color:I}),(0,_.jsx)(S.Z,{sx:{px:1.5},children:(0,_.jsx)(D.Z,{fontSize:"14px",color:void 0===d?g.palette.text.primary:g.palette.text.muted})}),(0,_.jsx)(K.B,{value:null!==(t=null===v||void 0===v?void 0:v.liquidationThreshold)&&void 0!==t?t:-1,percent:!0,variant:"secondary14",color:I})]})})),(0,_.jsxs)(G.h,{children:[(0,_.jsx)(K.B,{value:r,variant:"secondary14",color:I}),(0,_.jsx)(K.B,{value:i,variant:"secondary12",color:I,symbol:"USD",symbolsColor:I})]})]}),"stETH"===p.reserve.symbol&&(0,_.jsx)(o.Z,{sx:{pl:"16px",width:"100%"},children:(0,_.jsx)(ie,{v2Price:p.reserve.priceInUSD,v2Amount:r,v3Price:null===v||void 0===v?void 0:v.priceInUSD})})]})},oe=function(e){var t=e.selectedBorrowAssets,n=e.userReserve,r=e.toggleSelectedBorrowPosition,i=e.v3Rates,s=e.enteringIsolation,a=(0,d.useMemo)((function(){return!n.migrationDisabled&&t.findIndex((function(e){return n.interestRate==V.tk.Stable?e.debtKey==n.reserve.stableDebtTokenAddress:e.debtKey==n.reserve.variableDebtTokenAddress}))>=0}),[t]),o=n.interestRate==V.tk.Stable?n.stableBorrows:n.variableBorrows,l=n.interestRate==V.tk.Stable?n.stableBorrowsUSD:n.variableBorrowsUSD;return(0,_.jsx)(ae,{checked:a,userReserve:n,amount:o,amountInUSD:l,onCheckboxClick:function(){r(n)},disabled:n.migrationDisabled,enabledAsCollateral:n.usageAsCollateralEnabledOnUser,borrowApyType:n.interestRate,v3Rates:i,enteringIsolation:s,isSupplyList:!1},n.debtKey)},le=function(){var e=(0,s.Z)();return(0,a.Z)(e.breakpoints.down(1125))?(0,_.jsx)(ce,{}):(0,_.jsxs)(X.H,{sx:{pl:0},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:64,minWidth:64,children:(0,_.jsx)(B.Z,{width:16,height:16})}),(0,_.jsx)(G.h,{align:"left",isRow:!0,maxWidth:250,minWidth:170,children:(0,_.jsxs)(o.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,_.jsx)(B.Z,{variant:"circular",width:32,height:32}),(0,_.jsx)(B.Z,{sx:{ml:3},width:39,height:20})]})}),(0,_.jsx)(G.h,{children:(0,_.jsx)(B.Z,{width:120,height:25})}),(0,_.jsx)(G.h,{children:(0,_.jsx)(B.Z,{width:120,height:25})}),(0,_.jsx)(G.h,{children:(0,_.jsx)(B.Z,{width:120,height:25})}),(0,_.jsxs)(G.h,{children:[(0,_.jsx)(B.Z,{width:70,height:16,sx:{mb:1}}),(0,_.jsx)(B.Z,{width:50,height:14})]})]})},ce=function(){return(0,_.jsxs)(X.H,{sx:{display:"flex",flexDirection:"column",pl:0},children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",width:"100%",pb:2,pt:2.5},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:48,minWidth:48,children:(0,_.jsx)(B.Z,{width:16,height:16})}),(0,_.jsx)(G.h,{align:"left",children:(0,_.jsxs)(o.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,_.jsx)(B.Z,{variant:"circular",width:32,height:32}),(0,_.jsx)(B.Z,{sx:{ml:3},width:39,height:20})]})})]}),(0,_.jsxs)(o.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,pb:4,pl:12},children:[(0,_.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,_.jsx)(B.Z,{width:130,height:16}),(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:1},children:[(0,_.jsx)(B.Z,{width:50,height:16}),(0,_.jsx)(B.Z,{width:30,height:14})]})]}),(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(B.Z,{width:80,height:16}),(0,_.jsx)(B.Z,{width:115,height:16})]}),(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(B.Z,{width:115,height:16}),(0,_.jsx)(B.Z,{width:150,height:16})]}),(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsx)(B.Z,{width:140,height:16}),(0,_.jsx)(B.Z,{width:115,height:16})]})]})]})},de=n(99435),xe=n(1475),ue=n(45556);var he=d.forwardRef((function(e,t){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),d.createElement("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"}))}));function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,U.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t=e.numSelected,n=e.allSelected,r=e.onSelectAllClick,i=e.disabled,a=(0,s.Z)(),l={border:"2px solid ".concat(a.palette.text.secondary),background:a.palette.text.secondary,width:16,height:16,borderRadius:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"};return i?(0,_.jsx)(de.M,{children:(0,_.jsx)(C.Z,{variant:"main12",sx:{fontWeight:700},children:(0,_.jsx)(o.Z,{sx:pe(pe({},l),{},{background:a.palette.action.disabledBackground,border:"2px solid ".concat(a.palette.action.disabled),"&:hover":{cursor:"not-allowed"}})})})}):(0,_.jsx)(de.M,{onClick:r,children:(0,_.jsx)(C.Z,{variant:"main12",sx:{fontWeight:700},children:n?(0,_.jsx)(o.Z,{sx:l,"data-cy":"migration-checkbox-all",children:(0,_.jsx)(S.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,_.jsx)(L.Z,{})})}):0!==t?(0,_.jsx)(o.Z,{sx:l,"data-cy":"migration-checkbox-all",children:(0,_.jsx)(S.Z,{sx:{fontSize:"16px",color:"background.paper"},children:(0,_.jsx)(he,{})})}):(0,_.jsx)(o.Z,{sx:pe(pe({},l),{},{background:"white"}),"data-cy":"migration-checkbox-all"})})})},je=function(e){var t=e.titleComponent,n=e.children,r=e.onSelectAllClick,s=e.loading,a=e.isAvailable,l=e.allSelected,c=e.numSelected,d=e.numAvailable,x=e.disabled;return(0,_.jsx)(o.Z,{sx:{width:"100%"},children:(0,_.jsxs)(ue.l,{titleComponent:(0,_.jsx)(C.Z,{component:"div",variant:"h3",sx:{mr:4},children:t}),children:[(a||s)&&(0,_.jsxs)(xe.u,{sx:{pl:0},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:48,minWidth:48,children:(0,_.jsx)(ve,{allSelected:l,numSelected:c,onSelectAllClick:r,disabled:x})}),(0,_.jsx)(o.Z,{sx:{height:22,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)(C.Z,{variant:"subheader2",color:"text.secondary",children:(0,_.jsx)(i.cC,{id:"{numSelected}/{numAvailable} assets selected",values:{numSelected:c,numAvailable:d}})})})]}),n]})})},fe=[{title:(0,_.jsx)(i.cC,{id:"APY change"})},{title:(0,_.jsx)(i.cC,{id:"Collateral change"})},{title:(0,_.jsx)(i.cC,{id:"Max LTV"})},{title:(0,_.jsx)(i.cC,{id:"Current v2 balance"})}],be=[{title:(0,_.jsx)(i.cC,{id:"APY change"})},{title:(0,_.jsx)(i.cC,{id:"APY type change"})},{title:(0,_.jsx)(i.cC,{id:"Liquidation Threshold"})},{title:(0,_.jsx)(i.cC,{id:"Current v2 balance"})}],ge=function(e){var t=e.titleComponent,n=e.children,r=e.onSelectAllClick,l=e.loading,c=e.isAvailable,d=e.withCollateral,x=e.withBorrow,u=e.allSelected,h=e.numSelected,m=e.numAvailable,p=e.disabled,v=e.isolatedReserveV3,j=(0,s.Z)(),f=(0,te.Yh)(),b=f.currentMarket,g=f.currentMarketData.marketTitle,y=Y.Z6.dashboard+"/?marketName="+b+"_v3";return(0,a.Z)(j.breakpoints.down(1125))?(0,_.jsx)(je,{titleComponent:t,onSelectAllClick:r,loading:l,isAvailable:c,allSelected:u,numSelected:h,disabled:p,numAvailable:m,children:n}):(0,_.jsx)(o.Z,{sx:{width:"100%"},children:(0,_.jsxs)(ue.l,{titleComponent:(0,_.jsxs)(o.Z,{display:"block",children:[(0,_.jsx)(C.Z,{component:"div",variant:"h3",sx:{mr:4},children:t}),v&&!v.enteringIsolationMode&&(0,_.jsx)(o.Z,{sx:{pt:"16px"},children:(0,_.jsx)(O.v,{severity:"warning",icon:!1,sx:{mb:0},children:(0,_.jsx)(C.Z,{variant:"caption",color:j.palette.warning[100],children:(0,_.jsx)(i.cC,{id:"Some migrated assets will not be used as collateral due to enabled isolation mode in {marketName} V3 Market. Visit <0>{marketName} V3 Dashboard</0> to manage isolation mode.",values:{marketName:g},components:{0:(0,_.jsx)(Y.rU,{href:y})}})})})})]}),children:[(c||l)&&(0,_.jsxs)(xe.u,{sx:{pl:0},children:[(0,_.jsx)(G.h,{align:"center",maxWidth:64,minWidth:64,children:(0,_.jsx)(ve,{allSelected:u,numSelected:h,onSelectAllClick:r,disabled:p})}),(0,_.jsx)(G.h,{isRow:!0,maxWidth:250,minWidth:170,children:(0,_.jsx)(de.M,{children:(0,_.jsx)(i.cC,{id:"Assets"})})}),d&&fe.map((function(e,t){return(0,_.jsx)(G.h,{children:(0,_.jsx)(de.M,{children:e.title})},t)})),x&&be.map((function(e,t){return(0,_.jsx)(G.h,{children:(0,_.jsx)(de.M,{children:e.title})},t)}))]}),n]})})},ye=function(e){var t=e.onSelectAllSupplies,n=e.onSelectAllBorrows,r=e.suppliesPositions,s=e.borrowsPositions,a=e.loading,l=e.isolatedReserveV3,c=e.isSupplyPositionsAvailable,x=e.isBorrowPositionsAvailable,u=e.emodeCategoryId,h=(0,te.Yh)(),m=h.selectedMigrationSupplyAssets,p=h.selectedMigrationBorrowAssets,v=(0,te.Yh)((0,d.useCallback)((function(e){return(0,H.xk)(e,0)}),[])),j=v.supplyReserves,f=v.borrowReserves,b=void 0===j.find((function(e){return void 0===e.migrationDisabled})),g=void 0===f.find((function(e){return void 0===e.migrationDisabled})),y=(0,H.FW)(j,m),Z=y.activeSelections,w=y.activeUnselected,C=(0,H.FW)(f,p),k=C.activeSelections,S=C.activeUnselected;return(0,_.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,_.jsx)(ge,{isolatedReserveV3:l,loading:a,onSelectAllClick:t,allSelected:0===w.length,isAvailable:c,titleComponent:(0,_.jsx)(i.cC,{id:"Select v2 supplies to migrate"}),emodeCategoryId:u,withCollateral:!0,disabled:b,numSelected:Z.length||0,numAvailable:j.length||0,children:r}),(0,_.jsx)(ge,{loading:a,onSelectAllClick:n,allSelected:0===S.length,isAvailable:x,withBorrow:!0,disabled:g,titleComponent:(0,_.jsx)(i.cC,{id:"Select v2 borrows to migrate"}),numSelected:k.length||0,numAvailable:f.length||0,children:s})]})},Ze=n(96471),we=n(11163),Ce=n(40535),ke=n(74815),Se=function(){var e=(0,we.useRouter)(),t=(0,M.f)().currentMarket,n=(0,A.hu)(t),r=n.market,l=n.network,c=(0,A.St)(r.marketTitle),d=(0,s.Z)(),x=(0,a.Z)(d.breakpoints.down("sm"));return(0,_.jsx)(ke.f,{titleComponent:(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(o.Z,{sx:{display:"flex",alignItems:x?"flex-start":"center",alignSelf:x?"flex-start":"center",mb:4,minHeight:"40px",flexDirection:x?"column":"row"},children:(0,_.jsx)(k.Z,{variant:"surface",size:"medium",color:"primary",startIcon:(0,_.jsx)(S.Z,{sx:{fontSize:"20px"},children:(0,_.jsx)(Ze.Z,{})}),onClick:function(){e.push(Y.Z6.dashboard)},sx:{mr:3,mb:x?"24px":"0"},"data-cy":"goBack-btn",children:(0,_.jsx)(i.cC,{id:"Go Back"})})}),(0,_.jsx)(Ce.V,{pageTitle:(0,_.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(A.gO,{size:32,logo:l.networkLogoPath,testChainName:c.testChainName}),(0,_.jsx)(i.cC,{id:"Migrate to {0} v3 Market",values:{0:"Ethereum AMM"===r.marketTitle?"Ethereum":r.marketTitle}})]})})]})})},Ae=n(83601),Ie=(0,c.default)((function(){return Promise.all([n.e(4653),n.e(3793),n.e(1573),n.e(7413)]).then(n.bind(n,99528)).then((function(e){return e.MigrateV3Modal}))}),{loadableGenerated:{webpack:function(){return[99528]}}});function Oe(){var e=(0,h.HT)().loading,t=(0,j.Z)(),n=t.currentAccount,r=t.loading,c=(0,p.T)().isPermissionsLoading,v=(0,s.Z)(),b=(0,a.Z)(v.breakpoints.down("sm")),g=(0,m.p)(10),y=(0,te.Yh)((0,d.useCallback)((function(e){return(0,H.xk)(e,g)}),[g])),Z=y.supplyReserves,w=y.borrowReserves,C=y.healthFactor,k=y.isolatedReserveV3,S=(0,te.Yh)((function(e){return{v2UserSummaryAfterMigration:(0,H.Zs)(e,g),v3UserSummaryBeforeMigration:(0,H.ee)(e,g),poolReserveV3:(0,Ae.$)(e)}})),A=S.v3UserSummaryBeforeMigration,I=S.v2UserSummaryAfterMigration,O=S.poolReserveV3,P=(0,te.Yh)((0,d.useCallback)((function(e){return(0,H.Cs)(e,g)}),[g])),T=(0,te.Yh)(),M=T.selectAllSupply,D=T.selectAllBorrow,B=T.toggleMigrationSelectedSupplyAsset,N=T.selectedMigrationSupplyAssets,R=T.toggleMigrationSelectedBorrowAsset,V=T.selectedMigrationBorrowAssets,z=T.resetMigrationSelectedAssets,L=T.enforceAsCollateral,F=T.getMigrationExceptionSupplyBalances;(0,d.useEffect)((function(){F&&Z.length>0&&F(Z)}),[F,Z]),(0,d.useEffect)((function(){z&&z()}),[z]),(0,te.Xh)();var W=Object.keys(N).length>1&&"0"==A.totalCollateralMarketReferenceCurrency;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Se,{}),n&&!c?(0,_.jsxs)(u.O,{children:[(0,_.jsx)(ye,{loading:e,isSupplyPositionsAvailable:Z.length>0,isBorrowPositionsAvailable:w.length>0,onSelectAllSupplies:function(){M(g)},onSelectAllBorrows:function(){D(g)},emodeCategoryId:null===O||void 0===O?void 0:O.userEmodeCategoryId,isolatedReserveV3:k,suppliesPositions:(0,_.jsx)(_.Fragment,{children:e?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(le,{}),(0,_.jsx)(le,{})]}):Z.length>0?Z.map((function(e){return(0,_.jsx)(ae,{checked:N.findIndex((function(t){return t.underlyingAsset==e.underlyingAsset}))>=0,enableAsCollateral:function(){return t=e.canBeEnforced,n=e.underlyingAsset,void(t&&L(n));var t,n},userControlledCollateral:W,canBeEnforced:"0"==A.totalCollateralMarketReferenceCurrency&&e.canBeEnforced,userReserve:e,amount:e.underlyingBalance,amountInUSD:e.underlyingBalanceUSD,onCheckboxClick:function(){B(e.underlyingAsset)},enabledAsCollateral:e.usageAsCollateralEnabledOnUserV3,isIsolated:e.isolatedOnV3,enteringIsolation:(null===k||void 0===k?void 0:k.enteringIsolationMode)||!1,v3Rates:e.v3Rates,disabled:e.migrationDisabled,isSupplyList:!0},e.underlyingAsset)})):(0,_.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)(f.N,{text:(0,_.jsx)(i.cC,{id:"Nothing supplied yet"})})})}),borrowsPositions:(0,_.jsx)(_.Fragment,{children:e?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(le,{}),(0,_.jsx)(le,{})]}):w.length>0?w.map((function(e){return(0,_.jsx)(oe,{userReserve:e,selectedBorrowAssets:V,toggleSelectedBorrowPosition:R,v3Rates:e.v3Rates,enteringIsolation:(null===k||void 0===k?void 0:k.enteringIsolationMode)||!1},e.debtKey)})):(0,_.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)(f.N,{text:(0,_.jsx)(i.cC,{id:"Nothing borrowed yet"})})})})}),!b&&(0,_.jsx)(l.Z,{sx:{my:10}}),(0,_.jsx)(E,{hfV2Current:C,hfV2AfterChange:I.healthFactor,hfV3Current:A.healthFactor,v3SummaryAfterMigration:P,disableButton:!Object.keys(N).length&&!Object.keys(V).length,enteringIsolationMode:(null===k||void 0===k?void 0:k.enteringIsolationMode)||!1,loading:e})]}):(0,_.jsx)(x.w,{loading:r,description:(0,_.jsx)(i.cC,{id:"Please connect your wallet to see migration tool."})})]})}Oe.getLayout=function(e){return(0,_.jsxs)(v.Z,{children:[e,(0,_.jsx)(Ie,{})]})}},96875:function(e,t,n){"use strict";n.d(t,{o:function(){return j}});var r=n(59499),i=n(4730),s=n(49501),a=n(1279),o=n(62097),l=n(30120),c=n(29630),d=n(75084),x=n(70794),u=n(41024),h=n(85893),m=["value","onInfoClick","HALIntegrationComponent"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.value,n=e.onInfoClick,r=e.HALIntegrationComponent,p=(0,i.Z)(e,m),j=(0,o.Z)().palette,f=Number((0,a.hE)(t).toFixed(2,x.Z.ROUND_DOWN)),b="";return b=f>=3?j.success.main:f<1.1?j.error.main:j.warning.main,(0,h.jsxs)(l.Z,{sx:{display:"inline-flex",alignItems:{xs:"flex-start",xsm:"center"},flexDirection:{xs:"column",xsm:"row"}},"data-cy":"HealthFactorTopPannel",children:["-1"===t?(0,h.jsx)(c.Z,{variant:"secondary14",color:j.success.main,children:"\u221e"}):(0,h.jsx)(u.B,v({value:f,sx:v({color:b},p.sx),visibleDecimals:2,compact:!0},p)),n&&(0,h.jsx)(d.Z,{onClick:n,variant:"surface",size:"small",sx:{minWidth:"unset",ml:{xs:0,xsm:2}},children:(0,h.jsx)(s.cC,{id:"Risk details"})}),r&&(0,h.jsx)(l.Z,{ml:{xs:0,xsm:2},mt:{xs:1,xsm:0},children:r})]})}},14463:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var r=n(59499),i=n(29630),s=(n(67294),n(85893));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return(0,s.jsx)(i.Z,o(o({},e),{},{children:"\u2014"}))}},18384:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(49501),i=n(29630),s=n(68861),a=n(69331),o=n(85893),l=function(e){var t=e.asset,n=e.severity;return(0,o.jsxs)(a.v,{severity:n||"info",sx:{mb:3},children:[(0,o.jsx)(i.Z,{variant:"subheader1",mb:.5,children:(0,o.jsx)(r.cC,{id:"You are entering Isolation mode"})}),(0,o.jsx)(i.Z,{children:(0,o.jsx)(r.cC,{id:"In Isolation mode, you cannot supply other assets as collateral. A global debt ceiling limits the borrowing power of the isolated asset. To exit isolation mode disable {0} as collateral before borrowing another asset. Read more in our <0>FAQ</0>",values:{0:t||""},components:{0:(0,o.jsx)(s.rU,{href:"https://docs.aave.com/faq/aave-v3-features#isolation-mode"})}})})]})}},26079:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(30120),i=n(29630),s=n(85893),a=function(e){var t=e.text;return(0,s.jsx)(r.Z,{sx:{px:{xs:4,xsm:6},pt:{xs:3.5,xsm:5.5},pb:{xs:6,sxm:7}},children:(0,s.jsx)(i.Z,{color:"text.secondary",children:t})})}},79340:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/v3-migration",function(){return n(24756)}])},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},80227:function(e,t,n){"use strict";var r=n(67294);const i=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=i}},function(e){e.O(0,[7529,7406,8809,4815,8019,5599,5315,9774,2888,179],(function(){return t=79340,e(e.s=t);var t}));var t=e.O();_N_E=t}]);