"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9388],{89388:function(e,t,r){r.r(t),r.d(t,{StakeModal:function(){return G}});var n=r(67294),a=r(8195),o=r(31959),s=r(17674),i=r(49501),c=r(1279),u=r(29630),l=r(77912),d=r(60265),p=r(77537),k=r(8656),m=r(84568),v=r(63206),x=r(57609),f=r(54401),b=r(53601),h=r(63491),g=r(67916),y=r(93608),j=r(57824),N=r(78944),T=r(10343),A=r(59499),O=r(50029),S=r(4730),w=r(87794),E=r.n(w),P=r(75331),C=r(89291),_=r(67489),D=r(85893),I=["amountToStake","isWrongNetwork","sx","symbol","blocked","selectedToken","event"];function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var W,Z=function(e){var t=e.amountToStake,r=e.isWrongNetwork,n=e.sx,a=e.symbol,o=e.blocked,s=e.selectedToken,c=(e.event,(0,S.Z)(e,I)),u=(0,k.Yh)(),l=u.stake,d=u.stakeWithPermit,p="aave"===s||"gho"===s,m=(0,C.Q)({tryPermit:p,permitAction:P.UQ.stakeWithPermit,protocolAction:P.UQ.stake,handleGetTxns:function(){var e=(0,O.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l({token:s,amount:t.toString()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleGetPermitTxns:function(){var e=(0,O.Z)(E().mark((function e(r,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d({token:s,amount:t.toString(),signature:r[0],deadline:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),eventTxInfo:{amount:t,assetName:s},skip:!t||0===parseFloat(t)||o,deps:[t,s]}),v=m.action,x=m.approval,f=m.requiresApproval,b=m.loadingTxns,h=m.approvalTxState,g=m.mainTxState;return(0,D.jsx)(_.B,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,A.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({requiresApproval:f,preparingTransactions:b,mainTxState:g,approvalTxState:h,isWrongNetwork:r,amount:t,handleAction:v,handleApproval:function(){return x([{amount:t,underlyingAsset:s,permitType:"STAKE"}])},symbol:a,requiresAmount:!0,actionText:(0,D.jsx)(i.cC,{id:"Stake"}),tryPermit:p,actionInProgressText:(0,D.jsx)(i.cC,{id:"Staking"}),sx:n},c))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(W||(W={}));var B=function(e){var t,r,o,A,O,S=e.stakeAssetName,w=e.icon,E=(0,p.Z)(),P=E.chainId,C=E.readOnlyModeAddress,_=(0,a.vR)(),I=_.gasLimit,U=_.mainTxState,B=_.txError,G=(0,k.Yh)((function(e){return e.currentMarketData})),L=(0,k.Yh)((function(e){return e.currentNetworkConfig})),M=(0,k.Yh)((function(e){return e.currentChainId})),F=(0,d.f)(G,S).data,R=(0,l.I)(G,S).data;R&&Array.isArray(R.stakeData)&&(A=(0,s.Z)(R.stakeData,1)[0]);F&&Array.isArray(F.stakeUserData)&&(O=(0,s.Z)(F.stakeUserData,1)[0]);var H=(0,n.useState)(""),Q=H[0],Y=H[1],q=(0,n.useRef)(),K=(0,c.Fv)((null===(t=O)||void 0===t?void 0:t.underlyingTokenUserBalance)||"0",18),V="-1"===Q,X=V?K:Q,$=Number(X)*Number((0,c.Fv)((null===(r=A)||void 0===r?void 0:r.stakeTokenPriceUSD)||1,8)),z=void 0;(0,c.hE)(X).gt(K)&&(z=W.NOT_ENOUGH_BALANCE);var J=L.isFork&&L.underlyingChainId===m.X.chainId?M:m.X.chainId,ee=P!==J,te=(0,v.Mo)(J);return B&&B.blocking?(0,D.jsx)(h.D,{txError:B}):U.success?(0,D.jsx)(y.R,{action:(0,D.jsx)(i.cC,{id:"Staked"}),amount:q.current,symbol:w}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(N.E,{title:"Stake",symbol:w}),ee&&!C&&(0,D.jsx)(T.I,{networkName:te.name,chainId:J,funnel:"Stake Modal"}),(0,D.jsx)(f.$,{}),(0,D.jsx)(b.W,{value:X,onChange:function(e){var t="-1"===e;q.current=t?K:e,Y(e)},usdValue:$.toString(),symbol:w,assets:[{balance:K.toString(),symbol:w}],isMaxSelected:V,maxValue:K.toString(),balanceText:(0,D.jsx)(i.cC,{id:"Wallet balance"})}),void 0!==z&&(0,D.jsx)(u.Z,{variant:"helperText",color:"red",children:z===W.NOT_ENOUGH_BALANCE?(0,D.jsx)(i.cC,{id:"Not enough balance on your wallet"}):null}),(0,D.jsx)(j.m6,{gasLimit:I,children:(0,D.jsx)(j.oD,{description:(0,D.jsx)(i.cC,{id:"Staking APR"}),value:Number((null===(o=A)||void 0===o?void 0:o.stakeApy)||"0")/1e4,percent:!0})}),B&&(0,D.jsx)(g.Q,{txError:B}),(0,D.jsx)(Z,{sx:{mt:"48px"},amountToStake:X,isWrongNetwork:ee,symbol:w,blocked:void 0!==z,selectedToken:S,event:x.so.STAKE_TOKEN})]})},G=function(){var e=(0,a.vR)(),t=e.type,r=e.close,n=e.args;return(0,D.jsx)(o.P,{open:t===a.w8.Stake,setOpen:r,children:(null===n||void 0===n?void 0:n.icon)&&(null===n||void 0===n?void 0:n.stakeAssetName)&&(0,D.jsx)(B,{icon:n.icon,stakeAssetName:n.stakeAssetName})})}}}]);