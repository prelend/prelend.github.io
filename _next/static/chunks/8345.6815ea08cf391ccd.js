"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8345],{58345:function(e,t,r){r.r(t),r.d(t,{StakeRewardClaimRestakeModal:function(){return L}});var n=r(67294),a=r(8195),s=r(31959),o=r(17674),i=r(49501),c=r(1279),u=r(29630),l=r(54401),d=r(77912),m=r(60265),k=r(77537),p=r(8656),x=r(84568),v=r(63206),b=r(53601),f=r(63491),j=r(67916),y=r(93608),A=r(57824),N=r(78944),g=r(10343),h=r(59499),O=r(50029),w=r(4730),T=r(87794),C=r.n(T),E=r(75331),S=r(89291),R=r(67489),P=r(85893),D=["amountToClaim","isWrongNetwork","sx","symbol","blocked","selectedToken"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var I,U=function(e){var t=e.amountToClaim,r=e.isWrongNetwork,n=e.sx,a=e.symbol,s=e.blocked,o=e.selectedToken,c=(0,w.Z)(e,D),u=(0,p.Yh)((function(e){return e.claimRewardsAndStake})),l=(0,S.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,O.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u({token:o,amount:t}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),protocolAction:E.UQ.claimRewardsAndStake,eventTxInfo:{amount:t,assetName:o},skip:!t||0===parseFloat(t)||s,deps:[t]}),d=l.action,m=l.loadingTxns,k=l.mainTxState,x=l.requiresApproval;return(0,P.jsx)(R.B,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({requiresApproval:x,blocked:s,preparingTransactions:m,handleAction:d,actionText:(0,P.jsx)(i.cC,{id:"Restake {symbol}",values:{symbol:a}}),actionInProgressText:(0,P.jsx)(i.cC,{id:"Restaking {symbol}",values:{symbol:a}}),mainTxState:k,isWrongNetwork:r,sx:n},c))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(I||(I={}));var Z=function(e){var t,r,s,h,O,w=e.stakeAssetName,T=e.icon,C=(0,k.Z)(),E=C.chainId,S=C.readOnlyModeAddress,R=(0,a.vR)(),D=R.gasLimit,_=R.mainTxState,Z=R.txError,L=(0,p.Yh)((function(e){return e.currentMarketData})),B=(0,p.Yh)((function(e){return e.currentNetworkConfig})),F=(0,p.Yh)((function(e){return e.currentChainId})),G=(0,m.f)(L,w).data,M=(0,d.I)(L,w).data;M&&Array.isArray(M.stakeData)&&(h=(0,o.Z)(M.stakeData,1)[0]);G&&Array.isArray(G.stakeUserData)&&(O=(0,o.Z)(G.stakeUserData,1)[0]);var W="AAVE",H=(0,n.useState)(""),V=H[0],Y=H[1],Q=(0,n.useRef)(),q=(0,c.Fv)((null===(t=O)||void 0===t?void 0:t.userIncentivesToClaim)||"0",18),X="-1"===V,$=X?q:V,z=Number(q)*Number((0,c.Fv)((null===(r=h)||void 0===r?void 0:r.stakeTokenPriceUSD)||1,8)),J=void 0;"0"===q&&(J=I.NOT_ENOUGH_BALANCE);var K=B.isFork&&B.underlyingChainId===x.X.chainId?F:x.X.chainId,ee=E!==K,te=(0,v.Mo)(K);return Z&&Z.blocking?(0,P.jsx)(f.D,{txError:Z}):_.success?(0,P.jsx)(y.R,{action:(0,P.jsx)(i.cC,{id:"Restaked"}),amount:Q.current,symbol:W}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(N.E,{title:"Restake AAVE rewards"}),ee&&!S&&(0,P.jsx)(g.I,{networkName:te.name,chainId:K}),(0,P.jsx)(l.$,{}),(0,P.jsx)(b.W,{value:$,onChange:function(e){var t="-1"===e;Q.current=t?q:e,Y(e)},usdValue:z.toString(),symbol:T,assets:[{balance:q.toString(),symbol:T}],isMaxSelected:X,maxValue:q.toString(),balanceText:(0,P.jsx)(i.cC,{id:"Amount claimable"})}),void 0!==J&&(0,P.jsx)(u.Z,{variant:"helperText",color:"red",children:J===I.NOT_ENOUGH_BALANCE?(0,P.jsx)(i.cC,{id:"No rewards to claim"}):null}),(0,P.jsx)(A.m6,{gasLimit:D,children:(0,P.jsx)(A.oD,{description:(0,P.jsx)(i.cC,{id:"Staking APR"}),value:Number((null===(s=h)||void 0===s?void 0:s.stakeApy)||"0")/1e4,percent:!0})}),Z&&(0,P.jsx)(j.Q,{txError:Z}),(0,P.jsx)(U,{sx:{mt:"48px"},amountToClaim:$,isWrongNetwork:ee,symbol:W,blocked:void 0!==J||0===Number($),selectedToken:w})]})},L=function(){var e=(0,a.vR)(),t=e.type,r=e.close,n=e.args;return(0,P.jsx)(s.P,{open:t===a.w8.StakeRewardsClaimRestake,setOpen:r,children:(null===n||void 0===n?void 0:n.icon)&&(null===n||void 0===n?void 0:n.stakeAssetName)&&(0,P.jsx)(Z,{stakeAssetName:n.stakeAssetName,icon:n.icon})})}}}]);