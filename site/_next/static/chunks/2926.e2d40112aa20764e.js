"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2926],{29002:function(e,t,n){n.d(t,{o:function(){return d}});var r=n(59499),a=n(4730),o=n(81645),i=n(85893),s=["sx"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.sx,n=(0,a.Z)(e,s);return(0,i.jsxs)(o.Z,l(l({sx:l({fill:"none",stroke:"#A5A8B6"},t),viewBox:"0 0 21 19",xmlns:"http://www.w3.org/2000/svg","aria-label":"Wallet"},n),{},{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_3719_3323)",strokeWidth:"2",children:[(0,i.jsx)("path",{d:"M17.3203 17.398H3.32031C2.78988 17.398 2.28117 17.1872 1.9061 16.8122C1.53103 16.4371 1.32031 15.9284 1.32031 15.3979V6.39795C1.32031 5.86752 1.53103 5.35881 1.9061 4.98374C2.28117 4.60866 2.78988 4.39795 3.32031 4.39795H17.3203C17.8507 4.39795 18.3595 4.60866 18.7345 4.98374C19.1096 5.35881 19.3203 5.86752 19.3203 6.39795V15.3979C19.3203 15.9284 19.1096 16.4371 18.7345 16.8122C18.3595 17.1872 17.8507 17.398 17.3203 17.398Z"}),(0,i.jsx)("path",{d:"M14.8203 11.3979C14.6877 11.3979 14.5605 11.3453 14.4668 11.2515C14.373 11.1577 14.3203 11.0306 14.3203 10.8979C14.3203 10.7653 14.373 10.6382 14.4668 10.5444C14.5605 10.4506 14.6877 10.3979 14.8203 10.3979C14.9529 10.3979 15.0801 10.4506 15.1739 10.5444C15.2676 10.6382 15.3203 10.7653 15.3203 10.8979C15.3203 11.0306 15.2676 11.1577 15.1739 11.2515C15.0801 11.3453 14.9529 11.3979 14.8203 11.3979Z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M16.3203 4.39793V2.99993C16.3202 2.69343 16.2497 2.39106 16.1142 2.11615C15.9787 1.84124 15.7818 1.60116 15.5387 1.41444C15.2956 1.22773 15.0129 1.09937 14.7124 1.03929C14.4118 0.979209 14.1015 0.989009 13.8053 1.06793L2.80531 4.00093C2.37937 4.11444 2.00285 4.36549 1.7343 4.71506C1.46575 5.06462 1.32021 5.49312 1.32031 5.93393V6.39793"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_3719_3323",children:(0,i.jsx)("rect",{width:"20",height:"19",fill:"white",transform:"translate(0.320312)"})})})]}))}},63491:function(e,t,n){n.d(t,{D:function(){return g}});var r=n(49501),a=n(5506),o=n(52758),i=n(30120),s=n(81645),c=n(29630),l=n(68346),d=n(75084),u=n(8195),v=n(85893),g=function(e){var t=e.txError,n=(0,u.vR)().close;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mb:"92px"},children:[(0,v.jsx)(i.Z,{sx:{width:"48px",height:"48px",backgroundColor:"error.200",borderRadius:"50%",mt:14,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(s.Z,{sx:{color:"error.main",fontSize:"32px"},children:(0,v.jsx)(a.Z,{})})}),(0,v.jsx)(c.Z,{sx:{mt:2},variant:"h2",children:(0,v.jsx)(r.cC,{id:"Transaction failed"})}),(0,v.jsx)(c.Z,{children:(0,v.jsx)(r.cC,{id:"You can report incident to our <0>Discord</0> or<1>Github</1>.",components:{0:(0,v.jsx)(l.Z,{href:"https://discord.com/invite/aave"}),1:(0,v.jsx)(l.Z,{href:"https://github.com/aave/interface"})}})}),(0,v.jsxs)(d.Z,{variant:"outlined",onClick:function(){return navigator.clipboard.writeText(t.rawError.message.toString())},size:"small",sx:{mt:6},children:[(0,v.jsx)(r.cC,{id:"Copy error text"}),(0,v.jsx)(s.Z,{sx:{ml:.5,fontSize:"12px"},children:(0,v.jsx)(o.Z,{})})]})]}),(0,v.jsx)(i.Z,{sx:{display:"flex",flexDirection:"column",mt:12},children:(0,v.jsx)(d.Z,{onClick:n,variant:"contained",size:"large",sx:{minHeight:"44px"},children:(0,v.jsx)(r.cC,{id:"Close"})})})]})}},93608:function(e,t,n){n.d(t,{R:function(){return f}});var r=n(49501),a=n(75331),o=n(62097),i=n(30120),s=n(29630),c=n(75084),l=n(67294),d=n(29002),u=n(41024),v=n(72667),g=n(77537),p=n(55200),x=n(85893),f=function(e){var t,n=e.txHash,f=e.action,h=e.amount,m=e.symbol,A=e.collateral,y=e.rate,b=e.addToken,j=e.customAction,k=e.customText,T=(0,g.Z)().addERC20Token,O=(0,l.useState)(""),C=O[0],w=O[1],D=(0,o.Z)(),S=b?null!==(t=b.iconSymbol)&&void 0!==t?t:b.symbol:"";return(0,x.jsx)(p.R,{txHash:n,children:(0,x.jsxs)(i.Z,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[f&&h&&m&&(0,x.jsx)(s.Z,{children:(0,x.jsx)(r.cC,{id:"You {action} <0/> {symbol}",values:{action:f,symbol:m},components:{0:(0,x.jsx)(u.B,{value:Number(h),compact:!0,variant:"secondary14"})}})}),j&&(0,x.jsxs)(s.Z,{children:[k,j]}),!f&&!h&&m&&(0,x.jsxs)(s.Z,{children:["Your ",m," ",A?"now":"is not"," used as collateral"]}),y&&(0,x.jsx)(s.Z,{children:(0,x.jsx)(r.cC,{id:"You switched to {0} rate",values:{0:y===a.tk.Variable?"variable":"stable"}})}),b&&m&&(0,x.jsxs)(i.Z,{sx:function(e){return{border:"dark"===e.palette.mode?"1px solid ".concat(e.palette.divider):"none",background:"dark"===e.palette.mode?"none":"#F7F7F9",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mt:"24px"}},children:[(0,x.jsx)(v.T1,{symbol:S,aToken:!(!b||!b.aToken),sx:{fontSize:"32px",mt:"12px",mb:"8px"}}),(0,x.jsx)(s.Z,{variant:"description",color:"text.primary",sx:{mx:"24px"},children:(0,x.jsx)(r.cC,{id:"Add {0} to wallet to track your balance.",values:{0:b&&b.symbol+" "}})}),(0,x.jsxs)(c.Z,{onClick:function(){T({address:b.address,decimals:b.decimals,symbol:b.symbol,image:/_/.test(S)?void 0:C})},variant:"dark"===D.palette.mode?"outlined":"contained",size:"medium",sx:{mt:"8px",mb:"12px"},children:[S&&!/_/.test(S)&&(0,x.jsx)(v.Js,{symbol:S,onImageGenerated:w,aToken:b.aToken}),(0,x.jsx)(d.o,{sx:{width:"20px",height:"20px"}}),(0,x.jsx)(s.Z,{variant:"buttonM",color:"white",ml:"4px",children:(0,x.jsx)(r.cC,{id:"Add to wallet"})})]})]})]})})}},10254:function(e,t,n){n.r(t),n.d(t,{GovDelegationModal:function(){return fe}});var r,a=n(67294),o=n(8195),i=n(31959),s=n(49501),c=n(6022),l=n(90455),d=n(29630),u=n(55343),v=n(82334),g=n(9279),p=n(19485),x=n(56371),f=n(58527),h=n(79979),m=n(85895),A=n(77537),y=n(8656),b=n(34841),j=n(63206),k=n(57609),T=n(63491),O=n(67916),C=n(93608),w=n(78944),D=n(35643),S=n(10343),E=n(30120),P=n(31944),Z=n(22841),I=n(8519),N=n(41024),V=n(92391),B=n(72667),L=n(85893);!function(e){e[e.ALL=0]="ALL",e[e.AAVE=1]="AAVE",e[e.STKAAVE=2]="STKAAVE",e[e.aAave=3]="aAave"}(r||(r={}));var R=function(e){var t=e.symbol,n=e.amount;return(0,L.jsx)(V.X,{sx:{alignItems:"center",width:"100%"},caption:(0,L.jsx)(E.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:Array.isArray(t)?t.map((function(e,n){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(B.T1,{aToken:"aAAVE"===e,symbol:"aAAVE"===e?"aave":e,sx:{width:16,height:16}}),(0,L.jsx)(d.Z,{variant:"subheader1",children:e}),n<t.length-1&&(0,L.jsx)(d.Z,{variant:"subheader1",children:"+"})]})})):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(B.T1,{aToken:"aAAVE"===t,symbol:"aAAVE"===t?"aave":t,sx:{width:16,height:16}}),(0,L.jsx)(d.Z,{variant:"subheader1",children:t})]})}),children:(0,L.jsx)(N.B,{variant:"secondary14",color:"text.secondary",value:n})})},_=function(e){var t=e.delegationTokens,n=e.setDelegationTokenType,o=e.delegationTokenType,i=e.delegationType,s=e.filter,c=(0,h.S)().data,d=c.aave,v=c.stkAave,g=c.aAave,p=s?function(e,t){return t===l.c.VOTING?e.filter((function(e){return""!==e.votingDelegatee})):t===l.c.PROPOSITION?e.filter((function(e){return""!==e.propositionDelegatee})):e.filter((function(e){return""!==e.propositionDelegatee||""!==e.votingDelegatee}))}(t,i):t,x=s&&1===p.length;return(0,a.useEffect)((function(){x&&n(p[0].type)}),[x,p,n]),x?(0,L.jsx)(R,{symbol:p[0].symbol,amount:p[0].amount}):(0,L.jsx)(u.Z,{variant:"standard",fullWidth:!0,sx:{mb:6},children:(0,L.jsxs)(P.Z,{value:o,onChange:function(e){return n(Number(e.target.value))},children:[(0,L.jsx)(Z.Z,{value:r.ALL,control:(0,L.jsx)(I.Z,{size:"small"}),componentsProps:{typography:{width:"100%"}},label:(0,L.jsx)(R,{symbol:["AAVE","stkAAVE","aAAVE"],amount:Number(d)+Number(v)+Number(g)}),"data-cy":"delegate-token-both"}),(0,L.jsx)(Z.Z,{value:r.AAVE,control:(0,L.jsx)(I.Z,{size:"small"}),componentsProps:{typography:{width:"100%"}},label:(0,L.jsx)(R,{symbol:"AAVE",amount:d}),"data-cy":"delegate-token-AAVE"}),(0,L.jsx)(Z.Z,{value:r.STKAAVE,control:(0,L.jsx)(I.Z,{size:"small"}),componentsProps:{typography:{width:"100%"}},label:(0,L.jsx)(R,{symbol:"stkAAVE",amount:v}),"data-cy":"delegate-token-stkAAVE"}),(0,L.jsx)(Z.Z,{value:r.aAave,control:(0,L.jsx)(I.Z,{size:"small"}),componentsProps:{typography:{width:"100%"}},label:(0,L.jsx)(R,{symbol:"aAAVE",amount:g}),"data-cy":"delegate-token-aAave"})]})})},M=n(34637),G=n(59379),z=function(e){var t=e.delegationType,n=e.setDelegationType;return(0,a.useEffect)((function(){n(l.c.ALL)}),[n]),(0,L.jsxs)(G.f,{value:t,exclusive:!0,onChange:function(e,t){return n(t)},children:[(0,L.jsx)(M.Y,{value:l.c.ALL,disabled:t===l.c.ALL,children:(0,L.jsx)(d.Z,{variant:"buttonM",children:(0,L.jsx)(s.cC,{id:"Both"})})}),(0,L.jsx)(M.Y,{value:l.c.VOTING,disabled:t===l.c.VOTING,children:(0,L.jsx)(d.Z,{variant:"buttonM",children:(0,L.jsx)(s.cC,{id:"Voting"})})}),(0,L.jsx)(M.Y,{value:l.c.PROPOSITION,disabled:t===l.c.PROPOSITION,children:(0,L.jsx)(d.Z,{variant:"buttonM",children:(0,L.jsx)(s.cC,{id:"Proposition"})})})]})},H=n(59499),W=n(50029),F=n(17674),Y=n(87794),q=n.n(Y),K=n(80854),U=n(75331),Q=n(16441),J=n(30194),$=n(39771),X=n(31001),ee=n(16540),te=n(89291);function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=n(58057),se=n(81645),ce=n(75084),le=n(90149);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,H.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve,ge=function(e){var t=e.isRevoke,n=e.approvalTxState,r=e.handleSignatures,a=e.handleAction,i=e.isWrongNetwork,c=e.mainTxState,l=e.preparingTransactions,u=e.requiresSignature,v=e.sx,g=e.blocked,p=(0,o.vR)().txError,x=(0,A.Z)().readOnlyModeAddress;var f=g?{disabled:!0,content:(0,L.jsx)(s.cC,{id:"{0}",values:{0:t?"Revoke":"Delegate"}})}:(null===p||void 0===p?void 0:p.txAction)!==$.aD.GAS_ESTIMATION&&(null===p||void 0===p?void 0:p.txAction)!==$.aD.MAIN_ACTION||null===p||void 0===p||!p.actionBlocked?i?{disabled:!0,content:(0,L.jsx)(s.cC,{id:"Wrong Network"})}:l?{disabled:!0,loading:!0}:null!==c&&void 0!==c&&c.loading?{loading:!0,disabled:!0,content:(0,L.jsx)(s.cC,{id:"{0}",values:{0:t?"Revoking":"Delegating"}})}:!u||null!==n&&void 0!==n&&n.success?{content:(0,L.jsx)(s.cC,{id:"{0}",values:{0:t?"Revoke":"Delegate"}}),handleClick:a}:{disabled:!0,content:(0,L.jsx)(s.cC,{id:"{0}",values:{0:t?"Revoke":"Delegate"}})}:{loading:!1,disabled:!0,content:(0,L.jsx)(s.cC,{id:"{0}",values:{0:t?"Revoke":"Delegate"}})},h=f.content,m=f.disabled,y=f.loading,b=f.handleClick,j=!u||i||l||g?null:null!==n&&void 0!==n&&n.loading?{loading:!0,disabled:!0,content:(0,L.jsx)(s.cC,{id:"Signing"})}:null!==n&&void 0!==n&&n.success?{disabled:!0,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(s.cC,{id:"Signatures ready"}),(0,L.jsx)(se.Z,{sx:{fontSize:20,ml:2},children:(0,L.jsx)(ie.Z,{})})]})}:{content:(0,L.jsx)(s.cC,{id:"Sign to continue"}),handleClick:r};return(0,L.jsxs)(E.Z,{sx:ue({display:"flex",flexDirection:"column",mt:12},v),children:[j&&!x&&(0,L.jsxs)(ce.Z,{variant:"contained",disabled:j.disabled||g,onClick:function(){return j.handleClick&&j.handleClick()},size:"large",sx:{minHeight:"44px"},"data-cy":"approvalButton",children:[j.loading&&(0,L.jsx)(le.Z,{color:"inherit",size:"16px",sx:{mr:2}}),j.content]}),(0,L.jsxs)(ce.Z,{variant:"contained",disabled:m||g||void 0!==x,onClick:b,size:"large",sx:ue({minHeight:"44px"},j?{mt:2}:{}),"data-cy":"actionButton",children:[y&&(0,L.jsx)(le.Z,{color:"inherit",size:"16px",sx:{mr:2}}),h]}),x&&(0,L.jsx)(d.Z,{variant:"helperText",color:"warning.main",sx:{textAlign:"center",mt:2},children:(0,L.jsx)(s.cC,{id:"Read-only mode. Connect to a wallet to perform transactions."})})]})},pe=function(e){var t=e.isWrongNetwork,n=e.blocked,i=e.delegationType,s=e.delegationTokenType,c=e.delegatee,d=e.isRevoke,u=function(e,t,n,i){var s=(0,y.Yh)((function(e){return e.delegateByType})),c=(0,y.Yh)((function(e){return e.delegate})),d=(0,y.Yh)((function(e){return e.getTokenNonce})),u=(0,y.Yh)((function(e){return[e.account,e.estimateGasLimit]})),v=(0,F.Z)(u,2),g=v[0],p=v[1],x=(0,A.Z)(),f=x.signTxData,h=x.sendTx,m=x.chainId,j=x.getTxError,k=(0,a.useState)([]),T=k[0],O=k[1],C=(0,a.useState)(),w=C[0],D=C[1],S=(0,a.useState)(Math.floor(Date.now()/1e3+3600).toString()),E=S[0],P=S[1],Z=e===r.ALL,I=(0,o.vR)(),N=I.approvalTxState,V=I.mainTxState,B=I.setMainTxState,L=I.setGasLimit,R=I.loadingTxns,_=I.setLoadingTxns,M=I.setTxError,G=I.setApprovalTxState,z=(0,ee.z)().delegationTokenService,H=function(){var e=(0,W.Z)(q().mark((function e(t){var n,r,a,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tx,r=t.errorCallback,a=t.successCallback,e.prev=1,e.next=4,n();case 4:return o=e.sent,e.prev=5,e.next=8,o.wait(1);case 8:a&&a(o),e.next=25;break;case 11:return e.prev=11,e.t0=e.catch(5),e.prev=13,e.next=16,j(o.hash);case 16:return i=e.sent,r&&r(new Error(i),o.hash),e.abrupt("return");case 21:return e.prev=21,e.t1=e.catch(13),r&&r(e.t1,o.hash),e.abrupt("return");case 25:return e.abrupt("return");case 28:e.prev=28,e.t2=e.catch(1),r&&r(e.t2);case 31:case"end":return e.stop()}}),e,null,[[1,28],[5,11],[13,21]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,W.Z)(q().mark((function e(){var n,r,a,o,s,c,l,d,u,v,x,f,A,y,j;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=16;break}return B(oe(oe({},V),{},{loading:!0})),n=Q.splitSignature(T[0]),r=n.v,a=n.r,o=n.s,s=Q.splitSignature(T[1]),c=s.v,l=s.r,d=s.s,u=Q.splitSignature(T[2]),v=u.v,x=u.r,f=u.s,A=[{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.aaveTokenAddress,deadline:E,v:r,r:a,s:o,delegationType:t},{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.stkAaveTokenAddress,deadline:E,v:c,r:l,s:d,delegationType:t},{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.aAaveTokenAddress,deadline:E,v:v,r:x,s:f,delegationType:t}],e.next=9,z.batchMetaDelegate(g,A,m);case 9:return y=e.sent,e.next=12,p(y);case 12:return y=e.sent,e.abrupt("return",H({tx:function(){return h(y)},successCallback:function(e){B({txHash:e.hash,loading:!1,success:!0}),M(void 0),J.queryClient.invalidateQueries({queryKey:X.B.powers(g,b.B2.coreChainId)})},errorCallback:function(e,t){var n=(0,$.WG)(e,$.aD.MAIN_ACTION);M(n),B({txHash:t,loading:!1})},action:$.aD.MAIN_ACTION}));case 16:if(!w){e.next=23;break}return B(oe(oe({},V),{},{loading:!0})),e.next=20,w.tx();case 20:return delete(j=e.sent).gasPrice,e.abrupt("return",H({tx:function(){return h(j)},successCallback:function(e){B({txHash:e.hash,loading:!1,success:!0}),M(void 0),J.queryClient.invalidateQueries({queryKey:X.B.powers(g,b.B2.coreChainId)})},errorCallback:function(e,t){var n=(0,$.WG)(e,$.aD.MAIN_ACTION);M(n),B({txHash:t,loading:!1})},action:$.aD.MAIN_ACTION}));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var n=(0,W.Z)(q().mark((function n(){var a,o,s,c,u,v,p,x,h,A,y,j,k,T,C,w,D,S;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==r.ALL){n.next=53;break}return G(oe(oe({},N),{},{loading:!0})),n.next=4,Promise.all([d(g,b.B2.votingAssets.aaveTokenAddress),d(g,b.B2.votingAssets.stkAaveTokenAddress),d(g,b.B2.votingAssets.aAaveTokenAddress)]);case 4:a=n.sent,o=(0,F.Z)(a,3),s=o[0],c=o[1],u=o[2],v=Math.floor(Date.now()/1e3+3600).toString(),P(v),p=[{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.aaveTokenAddress,deadline:v,nonce:String(s),delegationType:t,governanceTokenName:"Aave token V3",increaseNonce:!1,connectedChainId:m},{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.stkAaveTokenAddress,deadline:v,nonce:String(c),delegationType:t,governanceTokenName:"Staked Aave",increaseNonce:!1,connectedChainId:m},{delegator:g,delegatee:i,underlyingAsset:b.B2.votingAssets.aAaveTokenAddress,governanceTokenName:"Aave Ethereum AAVE",deadline:v,nonce:String(u),delegationType:t,increaseNonce:!1,connectedChainId:m}],x=[],h=0,A=p;case 14:if(!(h<A.length)){n.next=30;break}if(y=A[h],t===l.c.ALL){n.next=23;break}return n.next=19,z.prepareV3DelegateByTypeSignature(y);case 19:j=n.sent,x.push(j),n.next=27;break;case 23:return n.next=25,z.prepareV3DelegateByTypeSignature(y);case 25:k=n.sent,x.push(k);case 27:h++,n.next=14;break;case 30:n.prev=30,T=[],C=0,w=x;case 33:if(!(C<w.length)){n.next=43;break}return D=w[C],n.t0=T,n.next=38,f(D);case 38:n.t1=n.sent,n.t0.push.call(n.t0,n.t1);case 40:C++,n.next=33;break;case 43:G({txHash:te.Z,loading:!1,success:!0}),M(void 0),O(T),n.next=53;break;case 48:n.prev=48,n.t2=n.catch(30),S=(0,$.WG)(n.t2,$.aD.APPROVAL,!1),M(S),G({txHash:void 0,loading:!1});case 53:case"end":return n.stop()}}),n,null,[[30,48]])})));return function(){return n.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(n)return _(!1),O([]),void D(void 0);_(!0);var a=setTimeout((0,W.Z)(q().mark((function n(){var a,o,d,u,v,g,p,x;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==r.ALL){n.next=8;break}a=K.eB[U.UQ.default],L(a.limit),B({txHash:void 0}),M(void 0),_(!1),n.next=50;break;case 8:if(o=[],t!==l.c.ALL){n.next=15;break}return n.next=12,c({delegatee:i,governanceToken:e===r.AAVE?b.B2.votingAssets.aaveTokenAddress:e===r.STKAAVE?b.B2.votingAssets.stkAaveTokenAddress:b.B2.votingAssets.aAaveTokenAddress});case 12:o=n.sent,n.next=18;break;case 15:return n.next=17,s({delegatee:i,delegationType:t.toString(),governanceToken:e===r.AAVE?b.B2.votingAssets.aaveTokenAddress:e===r.STKAAVE?b.B2.votingAssets.stkAaveTokenAddress:b.B2.votingAssets.aAaveTokenAddress});case 17:o=n.sent;case 18:D(o[0]),B({txHash:void 0}),M(void 0),d=0,n.prev=22,u=ne(o),n.prev=24,u.s();case 26:if((v=u.n()).done){n.next=34;break}return g=v.value,n.next=30,g.gas();case 30:(p=n.sent)&&p.gasLimit&&(d+=Number(p.gasLimit));case 32:n.next=26;break;case 34:n.next=39;break;case 36:n.prev=36,n.t0=n.catch(24),u.e(n.t0);case 39:return n.prev=39,u.f(),n.finish(39);case 42:n.next=48;break;case 44:n.prev=44,n.t1=n.catch(22),x=(0,$.WG)(n.t1,$.aD.GAS_ESTIMATION,!1),M(x);case 48:L(d.toString()||""),_(!1);case 50:case"end":return n.stop()}}),n,null,[[22,44],[24,36,39,42]])}))),1e3);return function(){return clearTimeout(a)}}),[e,t,i,n]),{approvalTxState:N,signMetaTxs:re,mainTxState:V,loadingTxns:R,action:Y,isSignatureAction:Z}}(s,i,n,c),v=u.signMetaTxs,g=u.action,p=u.mainTxState,x=u.loadingTxns,f=u.approvalTxState;return(0,L.jsx)(ge,{isRevoke:d,preparingTransactions:x,mainTxState:p,handleSignatures:v,handleAction:g,isWrongNetwork:t,requiresSignature:s===r.ALL,blocked:n,approvalTxState:f})};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE",e[e.NOT_AN_ADDRESS=1]="NOT_AN_ADDRESS"}(ve||(ve={}));var xe=function(e){var t=e.type,n=(0,A.Z)(),i=n.chainId,E=n.readOnlyModeAddress,P=n.currentAccount,Z=(0,o.vR)(),I=Z.gasLimit,N=Z.mainTxState,V=Z.txError,B=(0,y.Yh)((function(e){return e.currentNetworkConfig})),R=(0,y.Yh)((function(e){return e.currentChainId})),M=(0,h.S)().data,G=M.aave,H=M.stkAave,W=M.aAave,F=(0,m.c)(),Y=F.data,q=F.refetch,K=(0,a.useState)(r.ALL),U=K[0],Q=K[1],J=(0,a.useState)(l.c.ALL),$=J[0],X=J[1],ee=(0,a.useState)(""),te=ee[0],ne=ee[1],re=t===o.w8.RevokeGovDelegation,ae=re&&!!Y&&(Y.aaveVotingDelegatee===g.d&&Y.stkAaveVotingDelegatee===g.d||Y.aavePropositionDelegatee===g.d&&Y.stkAavePropositionDelegatee===g.d);(0,a.useEffect)((function(){ae&&(Y.aaveVotingDelegatee===g.d&&Y.stkAaveVotingDelegatee===g.d?X(l.c.PROPOSITION):X(l.c.VOTING))}),[ae,Y]),(0,a.useEffect)((function(){ne(re?P:"")}),[re,ne,P]);var oe=[{address:b.B2.votingAssets.stkAaveTokenAddress,symbol:"stkAAVE",name:"Staked AAVE",amount:H,votingDelegatee:null===Y||void 0===Y?void 0:Y.stkAaveVotingDelegatee,propositionDelegatee:null===Y||void 0===Y?void 0:Y.stkAavePropositionDelegatee,type:r.STKAAVE},{address:b.B2.votingAssets.aaveTokenAddress,symbol:"AAVE",name:"AAVE",amount:G,votingDelegatee:null===Y||void 0===Y?void 0:Y.aaveVotingDelegatee,propositionDelegatee:null===Y||void 0===Y?void 0:Y.aavePropositionDelegatee,type:r.AAVE},{address:b.B2.votingAssets.aAaveTokenAddress,symbol:"aAAVE",name:"aAAVE",amount:W,votingDelegatee:null===Y||void 0===Y?void 0:Y.aAaveVotingDelegatee,propositionDelegatee:null===Y||void 0===Y?void 0:Y.aAavePropositionDelegatee,type:r.aAave}],ie=void 0;""===te||p.isAddress(te)||(ie=ve.NOT_AN_ADDRESS);(0,a.useEffect)((function(){N.success&&q()}),[N.success,q]);var se=B.isFork&&B.underlyingChainId===b.B2.coreChainId?R:b.B2.coreChainId,ce=i!==se,le=(0,j.Mo)(se);return V&&V.blocking?(0,L.jsx)(T.D,{txError:V}):N.success?(0,L.jsx)(C.R,{action:(0,L.jsx)(s.cC,{id:"{0}",values:{0:re?"Revoke":"Delegation"}})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.E,{title:re?"Revoke power":"Set up delegation"}),ce&&!E&&(0,L.jsx)(S.I,{networkName:le.name,chainId:se}),re&&!!Y&&(Y.aaveVotingDelegatee===g.d&&Y.stkAaveVotingDelegatee===g.d||Y.aavePropositionDelegatee===g.d&&Y.stkAavePropositionDelegatee===g.d)||(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{variant:"description",color:"text.secondary",sx:{mb:1},children:(0,L.jsx)(s.cC,{id:"{0}",values:{0:re?"Power to revoke":"Power to delegate"}})}),(0,L.jsx)(z,{delegationType:$,setDelegationType:X})]}),re?(0,L.jsx)(d.Z,{variant:"description",color:"text.secondary",sx:{mt:6,mb:2},children:(0,L.jsx)(s.cC,{id:"Balance to revoke"})}):(0,L.jsx)(f.G,{text:"Balance to delegate",variant:"description",textColor:"text.secondary",wrapperProps:{mt:6,mb:2},event:{eventName:k.vh.TOOL_TIP,eventParams:{tooltip:"Balance to delegate",funnel:"Governance Delegation"}},children:(0,L.jsx)(s.cC,{id:"Choose how much voting/proposition power to give to someone else by delegating some of your AAVE, stkAAVE or aAave balance. Your tokens will remain in your account, but your delegate will be able to vote or propose on your behalf. If your AAVE, stkAAVE or aAave balance changes, your delegate's voting/proposition power will be automatically adjusted."})}),(0,L.jsx)(_,{setDelegationTokenType:Q,delegationTokenType:U,delegationTokens:oe,delegationType:$,filter:re}),!re&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{variant:"description",color:"text.secondary",mb:1,children:(0,L.jsx)(s.cC,{id:"Recipient address"})}),(0,L.jsx)(u.Z,{error:void 0!==ie,variant:"standard",fullWidth:!0,children:(0,L.jsx)(v.Z,{variant:"outlined",fullWidth:!0,value:te,onChange:function(e){return ne(e.target.value)},placeholder:c.ag._("Enter ETH address"),error:void 0!==ie,helperText:ie===ve.NOT_AN_ADDRESS?(0,L.jsx)(s.cC,{id:"Not a valid address"}):null,"data-cy":"delegationAddress"})})]}),(0,L.jsx)(D.g,{gasLimit:(0,x.parseUnits)(I||"0","wei"),chainId:b.B2.coreChainId}),V&&(0,L.jsx)(O.Q,{txError:V}),(0,L.jsx)(pe,{delegationType:$,delegationTokenType:U,delegatee:te,isWrongNetwork:ce,blocked:void 0!==ie||""===te,isRevoke:re})]})},fe=function(){var e=(0,o.vR)(),t=e.type,n=e.close;return(0,L.jsx)(i.P,{open:t===o.w8.GovDelegation||t===o.w8.RevokeGovDelegation,setOpen:n,children:(0,L.jsx)(xe,{type:t===o.w8.GovDelegation?o.w8.GovDelegation:o.w8.RevokeGovDelegation})})}},80664:function(e,t,n){n.d(t,{P:function(){return g}});var r=n(80854),a=n(1279),o=n(81206),i=n(82403),s=n(70794),c=n(8656),l=n(63206),d=n(52369),u=n(45257),v=function(e){var t=(0,c.Yh)((function(e){return e.account})),n=(0,u._)(e,t),v=(0,d.T)(e),g=n.find((function(e){return e.isLoading}))||v.find((function(e){return e.isLoading}));return{walletBalances:v.map((function(t,c){var d;return function(e){var t=e.reservesHumanized,n=e.balances,c=e.marketData,d=(null===t||void 0===t?void 0:t.reservesData)||[],u=(null===t||void 0===t?void 0:t.baseCurrencyData)||{marketReferenceCurrencyDecimals:0,marketReferenceCurrencyPriceInUsd:"0",networkBaseTokenPriceInUsd:"0",networkBaseTokenPriceDecimals:0},v=!0;return{walletBalances:(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=d.find((function(e){var n;return t.address===r.hP.toLowerCase()?e.symbol.toLowerCase()===(null===(n=l.m5[c.chainId].wrappedBaseAssetSymbol)||void 0===n?void 0:n.toLowerCase()):e.underlyingAsset.toLowerCase()===t.address}));return"0"!==t.amount&&(v=!1),n&&(e[t.address]={amount:(0,a.Fv)(t.amount,n.decimals),amountUSD:(0,o.Z)({amount:new s.O(t.amount),currencyDecimals:n.decimals,priceInMarketReferenceCurrency:n.priceInMarketReferenceCurrency,marketReferenceCurrencyDecimals:u.marketReferenceCurrencyDecimals,normalizedMarketReferencePriceInUsd:(0,a.Fv)(u.marketReferenceCurrencyPriceInUsd,i.$3)})}),e}),{}),hasEmptyWallet:v}}({reservesHumanized:t.data,balances:null===(d=n[c])||void 0===d?void 0:d.data,marketData:e[c]})})),isLoading:g}},g=function(e){var t=v([e]),n=t.walletBalances,r=t.isLoading;return{walletBalances:n[0].walletBalances,hasEmptyWallet:n[0].hasEmptyWallet,loading:r}}},52369:function(e,t,n){n.d(t,{T:function(){return c},J:function(){return l}});var r=n(59499),a=n(87669),o=n(31001),i=n(16540);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(e,t){var n=(0,i.z)().uiPoolService;return(0,a.h)({queries:e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:o.B.poolReservesDataHumanized(e),queryFn:function(){return n.getReservesHumanized(e)},refetchInterval:o.g,meta:{}},t)}))})},l=function(e){return c([e])[0]}},45257:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(59499),a=n(87669),o=(n(8656),n(31001)),i=n(16540);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(e,t,n){var c=(0,i.z)().poolTokensBalanceService;return(0,a.h)({queries:e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:o.B.poolTokens(t,e),queryFn:function(){return c.getPoolTokensBalances(e,t)},enabled:!!t,refetchInterval:o.g},n)}))})}}}]);