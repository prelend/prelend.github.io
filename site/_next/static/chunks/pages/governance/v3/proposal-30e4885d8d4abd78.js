(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6734],{88215:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ct}});var n=r(79072),o=r(5152),a=r(11163),s=r(50811),i=r(17674),c=r(50029),l=r(87794),d=r.n(l),p=r(36492),u=r(16540),x=function(e){var t=(0,u.z)().governanceV3Service;return(0,p.a)({queryFn:function(){return function(e,t){return h.apply(this,arguments)}(e,t)},queryKey:["payloadsData"],cacheTime:0,enabled:e.length>0})};function h(){return(h=(0,c.Z)(d().mark((function e(t,r){var n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reduce((function(e,t){var r=t.chainId,n=t.payloadControllerAddress,o=t.payloadId;return e[r]||(e[r]={}),e[r][n]||(e[r][n]=[]),e[r][n].push(o),e}),{}),o=[],Object.entries(n).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1],s=+n;Object.entries(a).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1];o.push(r.getPayloadsData(n,a,s))}))})),e.next=5,Promise.all(o);case 5:return a=e.sent,e.abrupt("return",a.flat());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v,j=r(59499),f=r(71383),m=r(57218),g=r(80108),y=r(8656),b=r(34841),Z=r(7144);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=(0,g.Ps)(v||(v=(0,f.Z)(["\n  query getProposal($id: Int!) {\n    proposal(id: $id) {\n      ","\n    }\n  }\n"])),Z.Hx),C=function(){var e=(0,c.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.ZP)(b.B2.governanceCoreSubgraphUrl,P,{id:t});case 2:return r=e.sent,e.abrupt("return",r.proposal);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function D(){return(D=(0,c.Z)(d().mark((function e(t,r,n){var o,a,s,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting proposal",t),e.next=3,C(t);case 3:return o=e.sent,e.next=6,(0,Z.D6)(o);case 6:return a=e.sent,e.next=9,r.getProposalsData([{id:+o.id,snapshotBlockHash:o.snapshotBlockHash||m.R,chainId:+o.votingPortal.votingMachineChainId,votingMachineAddress:o.votingPortal.votingMachine}],n);case 9:return s=e.sent[0],i=O(O({},a),{},{votes:{forVotes:s.proposalData.forVotes,againstVotes:s.proposalData.againstVotes}}),e.abrupt("return",{proposal:i,votingMachineData:s});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k,V=function(e){var t=(0,u.z)().votingMachineSerivce,r=(0,y.Yh)((function(e){return e.account}));return(0,p.a)({queryFn:function(){return function(e,t,r){return D.apply(this,arguments)}(e,t,r)},queryKey:["governance_proposal",e,r],refetchOnMount:!1,refetchOnReconnect:!1,enabled:!isNaN(e)})},E=r(1279),I=r(64146),A=r(63206);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F,S=[{inputs:[{internalType:"contract ENS",name:"_ens",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"}],name:"getNames",outputs:[{internalType:"string[]",name:"r",type:"string[]"}],stateMutability:"view",type:"function"}],R=(0,g.Ps)(k||(k=(0,f.Z)(["\n  query getProposalVotes($proposalId: Int!) {\n    voteEmitteds(where: { proposalId: $proposalId }) {\n      proposalId\n      support\n      voter\n      votingPower\n    }\n  }\n"]))),_=function(){var e=(0,c.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.ZP)(b.B2.votingChainConfig[r].subgraphUrl,R,{proposalId:t});case 2:return n=e.sent,e.abrupt("return",n.voteEmitteds.map((function(e){return M(M({},e),{},{votingPower:(0,E.pV)(e.votingPower,18).toString()})})));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),L=function(){var e=(0,c.Z)(d().mark((function e(t){var r,n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,A.VH)(b.B2.coreChainId),n=new I.Contract("0x3671aE578E63FdF66ad4F3E12CC0c0d71Ac7510C",S),o=n.connect(r),e.abrupt("return",o.getNames(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){return+e.votingPower<+t.votingPower?1:+e.votingPower>+t.votingPower?-1:0},Y=function(e){var t=function(e){var t=e.proposalId,r=e.votingChainId;return(0,p.a)({queryFn:function(){var e=(0,c.Z)(d().mark((function e(){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,r);case 2:return n=e.sent,e.next=5,L(n.map((function(e){return e.voter})));case 5:return o=e.sent,e.abrupt("return",n.map((function(e,t){return M(M({},e),{},{ensName:o[t]})})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),queryKey:["proposalVotes",t],enabled:void 0!==r&&!isNaN(t),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}({proposalId:e.proposalId,votingChainId:e.votingChainId}),r=t.data,n=t.isFetching;return{yaeVotes:(null===r||void 0===r?void 0:r.filter((function(e){return!0===e.support})).sort(B))||[],nayVotes:(null===r||void 0===r?void 0:r.filter((function(e){return!1===e.support})).sort(B))||[],combinedVotes:(null===r||void 0===r?void 0:r.sort(B))||[],isFetching:n}},X=r(92908),T=r(49501),q=r(7734),W=r(3750),U=r(68915),H=r(56365),K=r(36599),G=r(7921),z=r(77451),$=r(9601),Q=r(17494),J=r(51221),ee=r(72162),te=r(70918),re=r(29630),ne=r(75084),oe=r(81645),ae=r(62097),se=r(27484),ie=r.n(se),ce=r(68861),le=r(57609),de=r(85893);!function(e){e[e.Created=0]="Created",e[e.OpenForVoting=1]="OpenForVoting",e[e.VotingClosed=2]="VotingClosed",e[e.PayloadsExecuted=3]="PayloadsExecuted",e[e.Cancelled=4]="Cancelled",e[e.Expired=5]="Expired",e[e.Done=6]="Done"}(F||(F={}));var pe=function(e){var t=e.proposal,r=e.payloads,n=(0,y.Yh)((function(e){return e.trackEvent}));if(void 0===r||void 0===t)return(0,de.jsx)(de.Fragment,{});var o=ue(t,r),a=(0,de.jsx)(T.cC,{id:"Voting closed"}),s=t.proposal.proposalMetadata.discussions.match(/https?:\/\/[^\s"]+/g);return(0,de.jsxs)(te.Z,{sx:{px:6,py:4,mb:2.5},children:[(0,de.jsx)(re.Z,{variant:"h3",children:(0,de.jsx)(T.cC,{id:"Proposal details"})}),(0,de.jsxs)(K.Z,{position:"right",sx:(0,j.Z)({},"& .".concat(G.Z.root,":before"),{flex:0,padding:0}),children:[(0,de.jsx)(fe,{completed:o>F.Created,active:o===F.Created,stepName:(0,de.jsx)(T.cC,{id:"Created"}),timestamp:je(+t.proposal.transactions.created.timestamp)}),(0,de.jsx)(fe,{completed:o>F.OpenForVoting,active:o===F.OpenForVoting,stepName:(0,de.jsx)(T.cC,{id:"Open for voting"}),timestamp:je(xe(o,t))}),(0,de.jsx)(fe,{completed:o>F.VotingClosed,active:o===F.VotingClosed,stepName:a,timestamp:je(he(o,t))}),(0,de.jsx)(fe,{completed:o>F.PayloadsExecuted,active:o===F.PayloadsExecuted,stepName:(0,de.jsx)(T.cC,{id:"Payloads executed"}),timestamp:je(ve(o,t,r)),lastStep:!0})]}),s&&(0,de.jsx)(ne.Z,{component:ce.rU,target:"_blank",rel:"noopener",onClick:function(){return n(le.vh.EXTERNAL_LINK,{AIP:t.proposal.id,Link:"Forum Discussion"})},href:s[0],variant:"outlined",endIcon:(0,de.jsx)(oe.Z,{children:(0,de.jsx)(H.Z,{})}),children:(0,de.jsx)(T.cC,{id:"Forum discussion"})})]})},ue=function(e,t){return e.proposal.state===q.rn.Created?F.Created:e.proposal.state===q.rn.Active?F.OpenForVoting:e.votingMachineData.state===W.U.Finished||e.proposal.state===q.rn.Queued?F.VotingClosed:e.proposal.state===q.rn.Executed?t.every((function(e){return e.state===U.S.Executed}))?F.Done:F.PayloadsExecuted:e.proposal.state===q.rn.Cancelled?F.Cancelled:e.proposal.state===q.rn.Expired?F.Expired:F.Done},xe=function(e,t){var r=t.votingMachineData.proposalData.startTime;if(e===F.Created||0===r){var n=+t.proposal.transactions.created.timestamp,o=t.proposal.votingConfig.cooldownBeforeVotingStart;return n+Number(o)}return t.votingMachineData.proposalData.startTime},he=function(e,t){var r=t.votingMachineData.proposalData.endTime;if(e===F.Created||0===r){var n=t.proposal.votingConfig.votingDuration;return xe(e,t)+Number(n)}return t.votingMachineData.proposalData.endTime},ve=function(e,t,r){var n=r.map((function(e){return e.executedAt})).sort((function(e,t){return t-e}))[0];if(e===F.Created||0===n){var o=r[0].delay;return he(e,t)+Number(o)}return n},je=function(e){return ie().unix(e).format("MMM D, YYYY h:mm A")},fe=function(e){var t=e.stepName,r=e.timestamp,n=e.lastStep,o=e.completed,a=e.active,s=(0,ae.Z)();return(0,de.jsxs)(z.Z,{children:[(0,de.jsxs)($.Z,{children:[(0,de.jsx)(Q.Z,{sx:{background:o?s.palette.primary.main:a?"unset":s.palette.text.disabled,borderColor:o||a?s.palette.primary.main:s.palette.text.disabled,my:1},variant:a?"outlined":"filled"}),!n&&(0,de.jsx)(J.Z,{sx:{background:o?s.palette.primary.main:s.palette.text.disabled}})]}),(0,de.jsxs)(ee.Z,{children:[(0,de.jsx)(re.Z,{sx:{mt:-1.5},variant:"main14",children:t}),(0,de.jsx)(re.Z,{variant:"tooltip",color:"text.muted",children:r})]})]})},me=r(36644),ge=r(11065),ye=r(30120),be=r(56371),Ze=r(41024),we=r(92391),Oe=r(69331),Pe=r(3765),Ce=r(31001),De=r(8195),ke=r(91555);function Ve(e){var t=e.proposal,r=(0,De.vR)().openGovVote,n=(0,y.Yh)((function(e){return e.account})),o=t.votingMachineData.votedInfo,a=t.proposal.votingPortal.votingMachineChainId,s=ke.m[a],i=function(e,t){var r=(0,u.z)().governanceV3Service,n=(0,y.Yh)((function(e){return e.account}));return(0,p.a)({queryFn:function(){return r.getVotingPowerAt(e,n,t)},queryKey:Ce.B.votingPowerAt(n,e,t),enabled:!!n})}(t.proposal.snapshotBlockHash===m.R?"latest":t.proposal.snapshotBlockHash,t.votingMachineData.votingAssets),c=i.data,l=t.votingMachineData.state===W.U.Active,d=c&&"0"!==(null===o||void 0===o?void 0:o.votingPower),x=!!n&&o&&d,h=!!n&&l&&0===Number(c),v=c&&!d&&!!n&&l&&0!==Number(c);return(0,de.jsxs)(te.Z,{sx:{px:6,py:4,mb:2.5},children:[(0,de.jsx)(we.X,{sx:{mb:8},caption:(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(re.Z,{variant:"h3",children:(0,de.jsx)(T.cC,{id:"Your voting info"})}),s&&(0,de.jsxs)(ye.Z,{sx:{display:"flex",alignItems:"center",color:"text.secondary"},children:[(0,de.jsx)(re.Z,{variant:"caption",children:(0,de.jsx)(T.cC,{id:"Voting is on"})}),(0,de.jsx)(ye.Z,{sx:{height:16,width:16,ml:1,mr:1,mb:1},children:(0,de.jsx)("img",{src:s.networkLogoPath,alt:"network logo",style:{height:"100%",width:"100%"}})}),(0,de.jsx)(re.Z,{variant:"caption",children:null===s||void 0===s?void 0:s.displayName})]})]})}),n?(0,de.jsxs)(de.Fragment,{children:[n&&!d&&!l&&(0,de.jsx)(re.Z,{sx:{textAlign:"center"},color:"text.muted",children:(0,de.jsx)(T.cC,{id:"You did not participate in this proposal"})}),n&&l&&(0,de.jsx)(we.X,{caption:(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(re.Z,{variant:"description",children:(0,de.jsx)(T.cC,{id:"Voting power"})}),(0,de.jsx)(re.Z,{variant:"caption",color:"text.secondary",children:"(AAVE + stkAAVE)"})]}),children:(0,de.jsx)(Ze.B,{value:c||0,variant:"main16",visibleDecimals:2})}),x&&(0,de.jsxs)(Oe.v,{severity:o.support?"success":"error",sx:{my:2},children:[(0,de.jsx)(re.Z,{variant:"subheader1",children:(0,de.jsx)(T.cC,{id:"You voted {0}",values:{0:o.support?"YAE":"NAY"}})}),(0,de.jsx)(re.Z,{variant:"caption",children:(0,de.jsx)(T.cC,{id:"With a voting power of <0/>",components:{0:(0,de.jsx)(Ze.B,{value:(0,be.formatUnits)(t.votingMachineData.votedInfo.votingPower,18)||0,variant:"caption",visibleDecimals:2})}})})]}),h&&(0,de.jsx)(Oe.v,{severity:"warning",sx:{my:2},children:(0,de.jsx)(T.cC,{id:"Not enough voting power to participate in this proposal"})}),v&&(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(ne.Z,{color:"success",variant:"contained",fullWidth:!0,onClick:function(){return r(t,!0,c)},children:(0,de.jsx)(T.cC,{id:"Vote YAE"})}),(0,de.jsx)(ne.Z,{color:"error",variant:"contained",fullWidth:!0,onClick:function(){return r(t,!1,c)},sx:{mt:2},children:(0,de.jsx)(T.cC,{id:"Vote NAY"})})]})]}):(0,de.jsx)(Pe.p,{})]})}var Ee=r(91655),Ie=r(4730),Ae=r(2905),Ne=r(75426),Me=r(33740),Fe=["checked","text","variant","loading"];function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e){var t=e.checked,r=e.text,n=e.variant,o=void 0===n?"subheader2":n,a=e.loading,s=(0,Ie.Z)(e,Fe),i=(0,ae.Z)().palette;return(0,de.jsxs)(ye.Z,Re(Re({},s),{},{sx:Re({display:"flex",alignItems:"center"},s.sx),children:[(0,de.jsx)(re.Z,{variant:o,component:"span",sx:{mr:1},children:r}),a?(0,de.jsx)(Ae.Z,{height:16}):t?(0,de.jsx)(Ne.Z,{height:16,color:i.success.main}):(0,de.jsx)(Me.Z,{height:16,color:i.error.main})]}))}var Le=r(88622),Be=r(72399),Ye=r(74663),Xe=r(61225),Te=r(67294),qe=r(84563),We=r(44731),Ue=r(62717),He=r(16228),Ke=function(e){var t,r=e.compact,n=e.voter,o=n.voter,a=n.ensName,s=(0,Ue.Ld)(""!==o?o:"0x"),i=(0,y.Yh)((function(e){return e.trackEvent})),c=Number(n.votingPower),l=c<1?4:c<10?3:c<1e3||c>1e6?2:c>1e5?1:0;return Number(n.votingPower)<=0?null:(0,de.jsx)(ye.Z,{sx:{my:6,"&:first-of-type":{mt:0},"&:last-of-type":{mb:0}},children:(0,de.jsxs)(ye.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsxs)(ye.Z,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,de.jsx)(We.Z,{src:s,sx:{width:24,height:24,mr:2}}),(0,de.jsx)(ce.rU,{href:"https://etherscan.io/address/".concat(o),onClick:function(){return i(le.vh.EXTERNAL_LINK,{funnel:"AIP VOTERS",Link:"Etherscan"})},children:(0,de.jsxs)(re.Z,{variant:"subheader1",color:"primary",sx:{display:"flex",alignItems:"center"},children:[(t=a,r?t?t.length<=10?t:(0,He.X)(t,4,3):(0,He.X)(o,3,3):t?t.length<16?t:(0,He.X)(t,12,3):(0,He.X)(o,9,3)),(0,de.jsx)(oe.Z,{sx:{width:14,height:14,ml:.5},children:(0,de.jsx)(qe.Z,{})})]})})]}),(0,de.jsxs)(ye.Z,{sx:{display:"flex",flexGrow:1,justifyContent:"space-between",alignItems:"center",maxWidth:r?82:96},children:[(0,de.jsx)(re.Z,{variant:"subheader1",color:n.support?"success.main":"error.main",children:n.support?"YAE":"NAY"}),(0,de.jsx)(Ze.B,{variant:"subheader1",color:"primary",value:c,visibleDecimals:l,roundDown:!0})]})]})})};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=function(e){var t=e.compact,r=void 0!==t&&t,n=e.voters,o=e.sx;return(0,de.jsx)(ye.Z,{sx:ze({maxHeight:205,overflow:"hidden",overflowY:"scroll"},o),children:0===n.length?(0,de.jsx)(ye.Z,{sx:{color:"text.secondary"},children:"\u2014"}):n.sort((function(e,t){return Number(t.votingPower)-Number(e.votingPower)})).map((function(e){return(0,de.jsx)(Te.Fragment,{children:(0,de.jsx)(Ke,{voter:e,compact:r})},e.voter)}))})},Qe=r(34637),Je=r(59379),et=r(31959);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt=function(e){var t=e.open,r=e.close,o=e.proposal,a=e.voters,s=(0,ae.Z)().breakpoints,i=(0,Xe.Z)(s.up("md")),c=(0,Te.useState)("yaes"),l=c[0],d=c[1],p={border:"1px solid",borderColor:"divider",borderRadius:1};if(!o||!a)return null;var u=(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(Ye.A,{yae:!0,percent:o.forPercent,votes:o.forPercent,sx:rt(rt({},p),{},{px:4,py:2})}),(0,de.jsxs)(ye.Z,{sx:rt(rt({},p),{},{mt:3}),children:[(0,de.jsxs)(we.X,{sx:{px:4,py:2,borderBottom:"1px solid",borderColor:"divider"},children:[(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:(0,de.jsx)(T.cC,{id:"Addresses ({0})",values:{0:a.yaeVotes.length}})}),(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:(0,de.jsx)(T.cC,{id:"Votes"})})]}),(0,de.jsx)($e,{voters:a.yaeVotes,sx:{p:4,mb:0,maxHeight:318}})]})]}),x=(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(Ye.A,{percent:o.againstPercent,votes:o.againstPercent,sx:rt(rt({},p),{},{px:4,py:2})}),(0,de.jsxs)(ye.Z,{sx:rt(rt({},p),{},{mt:3}),children:[(0,de.jsxs)(we.X,{sx:{px:4,py:2,borderBottom:"1px solid",borderColor:"divider"},children:[(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:(0,de.jsx)(T.cC,{id:"Addresses ({0})",values:{0:a.nayVotes.length}})}),(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:(0,de.jsx)(T.cC,{id:"Votes"})})]}),(0,de.jsx)($e,{voters:a.nayVotes,sx:{p:4,mb:0,maxHeight:318}})]})]});return(0,de.jsxs)(et.P,{open:t,setOpen:r,contentMaxWidth:i?800:360,children:[(0,de.jsx)(re.Z,{variant:"h2",children:(0,de.jsx)(T.cC,{id:"Votes"})}),i?(0,de.jsxs)(n.ZP,{container:!0,spacing:4,sx:{mt:4},children:[(0,de.jsx)(n.ZP,{item:!0,xs:6,children:u}),(0,de.jsx)(n.ZP,{item:!0,xs:6,children:x})]}):(0,de.jsxs)(de.Fragment,{children:[(0,de.jsxs)(Je.Z,{color:"primary",value:l,exclusive:!0,onChange:function(e,t){return d(t)},sx:{width:"100%",height:"44px",mt:8,mb:6},children:[(0,de.jsx)(Qe.Z,{value:"yaes",disabled:"yaes"===l,children:(0,de.jsx)(re.Z,{variant:"subheader1",children:(0,de.jsx)(T.cC,{id:"Voted YAE"})})}),(0,de.jsx)(Qe.Z,{value:"nays",disabled:"nays"===l,children:(0,de.jsx)(re.Z,{variant:"subheader1",children:(0,de.jsx)(T.cC,{id:"Voted NAY"})})})]}),"yaes"===l&&u,"nays"===l&&x]})]})},ot=function(e){var t=e.proposal,r=e.proposalVotes,n=(0,Te.useState)(!1),o=n[0],a=n[1],s=(0,ae.Z)().breakpoints,i=(0,Xe.Z)(s.only("md")),c=(0,y.Yh)((function(e){return e.trackEvent}));return r&&0!==r.combinedVotes.length?(0,de.jsxs)(ye.Z,{sx:{my:8},children:[(0,de.jsxs)(we.X,{sx:{mb:3},children:[(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:r.combinedVotes.length>10?(0,de.jsx)(T.cC,{id:"Top 10 addresses"}):(0,de.jsx)(T.cC,{id:"Addresses"})}),(0,de.jsx)(re.Z,{variant:"subheader2",color:"text.secondary",children:(0,de.jsx)(T.cC,{id:"Votes"})})]}),(0,de.jsx)($e,{compact:i,voters:r.combinedVotes.slice(0,10),sx:{my:4,pr:2.25}}),r.combinedVotes.length>10&&(0,de.jsx)(ne.Z,{variant:"outlined",fullWidth:!0,onClick:function(){c(le.cD.VIEW_ALL_VOTES),a(!0)},children:(0,de.jsx)(T.cC,{id:"View all votes"})}),o&&(0,de.jsx)(nt,{open:o,close:function(){return a(!1)},proposal:t,voters:r})]}):(0,de.jsx)(ye.Z,{sx:{mt:8}})},at=function(e){var t=e.proposal,r=e.loading,n=e.proposalVotes,o=t?(0,Be._P)(null===t||void 0===t?void 0:t.proposal):void 0;return(0,de.jsxs)(te.Z,{sx:{px:6,py:4,mb:2.5},children:[(0,de.jsx)(re.Z,{variant:"h3",children:(0,de.jsx)(T.cC,{id:"Voting results"})}),t&&o?(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(Ye.A,{yae:!0,percent:o.forPercent,votes:o.forVotes,sx:{mt:8},loading:r}),(0,de.jsx)(Ye.A,{percent:o.againstPercent,votes:o.againstVotes,sx:{mt:3},loading:r}),n&&(0,de.jsx)(ot,{proposal:o,proposalVotes:n}),(0,de.jsx)(we.X,{caption:(0,de.jsx)(T.cC,{id:"State"}),sx:{height:48},captionVariant:"description",children:(0,de.jsx)(ye.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:(0,de.jsx)(Le.Ul,{state:t.proposal.state,loading:r})})}),(0,de.jsx)(we.X,{caption:(0,de.jsx)(T.cC,{id:"Quorum"}),sx:{height:48},captionVariant:"description",children:(0,de.jsx)(_e,{loading:r,text:o.quorumReached?(0,de.jsx)(T.cC,{id:"Reached"}):(0,de.jsx)(T.cC,{id:"Not reached"}),checked:o.quorumReached,sx:{height:48},variant:"description"})}),(0,de.jsx)(we.X,{caption:(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(T.cC,{id:"Current votes"}),(0,de.jsx)(re.Z,{variant:"caption",color:"text.muted",children:"Required"})]}),sx:{height:48},captionVariant:"description",children:(0,de.jsxs)(ye.Z,{sx:{textAlign:"right"},children:[(0,de.jsx)(Ze.B,{value:o.forVotes,visibleDecimals:2,roundDown:!0,sx:{display:"block"}}),(0,de.jsx)(Ze.B,{variant:"caption",value:o.quorum,visibleDecimals:2,roundDown:!0,color:"text.muted"})]})}),(0,de.jsx)(we.X,{caption:(0,de.jsx)(T.cC,{id:"Differential"}),sx:{height:48},captionVariant:"description",children:(0,de.jsx)(_e,{loading:r,text:o.differentialReached?(0,de.jsx)(T.cC,{id:"Reached"}):(0,de.jsx)(T.cC,{id:"Not reached"}),checked:o.differentialReached,sx:{height:48},variant:"description"})}),(0,de.jsx)(we.X,{caption:(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(T.cC,{id:"Current differential"}),(0,de.jsx)(re.Z,{variant:"caption",color:"text.muted",children:"Required"})]}),sx:{height:48},captionVariant:"description",children:(0,de.jsxs)(ye.Z,{sx:{textAlign:"right"},children:[(0,de.jsx)(Ze.B,{value:o.currentDifferential,visibleDecimals:2,roundDown:!0,sx:{display:"block"}}),(0,de.jsx)(Ze.B,{variant:"caption",value:o.requiredDifferential,visibleDecimals:2,roundDown:!0,color:"text.muted"})]})})]}):(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(Ee.Z,{height:28,sx:{mt:8}}),(0,de.jsx)(Ee.Z,{height:28,sx:{mt:8}})]})]})},st=r(15446),it=(0,o.default)((function(){return Promise.all([r.e(5393),r.e(6798),r.e(3793),r.e(1573),r.e(3849)]).then(r.bind(r,74520)).then((function(e){return e.GovVoteModal}))}),{loadableGenerated:{webpack:function(){return[74520]}}});function ct(){var e=(0,a.useRouter)().query,t=Number(e.proposalId),r=V(t),o=r.data,i=r.isLoading,c=r.error,l=(null===o||void 0===o?void 0:o.proposal.payloads.map((function(e){return{payloadControllerAddress:e.payloadsController,payloadId:+e.id,chainId:+e.chainId}})))||[],d=x(l).data,p=Y({proposalId:t,votingChainId:o?+o.proposal.votingPortal.votingMachineChainId:void 0}),u=i;return(0,de.jsxs)(de.Fragment,{children:[o&&(0,de.jsx)(s.h,{imageUrl:"https://app.aave.com/aaveMetaLogo-min.jpg",title:o.proposal.proposalMetadata.title,description:o.proposal.proposalMetadata.shortDescription}),(0,de.jsx)(ge.S,{}),(0,de.jsx)(st.O,{children:(0,de.jsxs)(n.ZP,{container:!0,spacing:4,children:[(0,de.jsx)(n.ZP,{item:!0,xs:12,md:8,children:(0,de.jsx)(me.R,{proposal:o,error:!!c,loading:i})}),(0,de.jsxs)(n.ZP,{item:!0,xs:12,md:4,children:[o&&(0,de.jsx)(Ve,{proposal:o}),(0,de.jsx)(at,{proposal:o,proposalVotes:p,loading:u}),(0,de.jsx)(pe,{proposal:o,payloads:d})]})]})})]})}ct.getLayout=function(e){return(0,de.jsxs)(X.Z,{children:[e,(0,de.jsx)(it,{})]})}},44304:function(e,t,r){"use strict";r.d(t,{M:function(){return a}});var n=r(81645),o=r(85893),a=function(e){var t=e.color;return(0,o.jsx)(n.Z,{xmlns:"http://www.w3.org/2000/svg","aria-label":"Lens",children:(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 96 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65.519 16.253c3.9-3.24 8.253-4.472 12.426-4.16 4.453.332 8.573 2.41 11.65 5.427 3.078 3.018 5.192 7.054 5.53 11.41.341 4.396-1.137 9-5.035 13.041-.357.372-.722.74-1.094 1.102-17.681 17.338-41.17 17.384-41.41 17.384-.12 0-23.683 0-41.41-17.386l-.005-.004a71.134 71.134 0 0 1-1.081-1.09l-.003-.003c-3.9-4.037-5.38-8.64-5.04-13.036.338-4.356 2.45-8.393 5.526-11.412 3.076-3.018 7.196-5.097 11.65-5.431 4.173-.313 8.526.918 12.43 4.156.42-4.994 2.606-8.881 5.78-11.554 3.385-2.85 7.796-4.24 12.152-4.24 4.357 0 8.768 1.39 12.153 4.24 3.175 2.673 5.361 6.56 5.78 11.556ZM48.395 58.7l-.001-.022h.002l-.001.022Zm-1.619 0v-.022.022Zm14.093-24.075c-.483 0-.65.685-.342 1.048a3.65 3.65 0 0 1 .875 2.372c0 2.048-1.693 3.707-3.78 3.707-2.088 0-3.78-1.66-3.78-3.707 0-.11-.146-.164-.212-.075a6.264 6.264 0 0 0-1.164 2.651c-.093.533-.535.975-1.09.975h-.307c-.724 0-1.322-.576-1.215-1.274.733-4.784 5.54-8.253 11.016-8.253 5.475 0 10.282 3.47 11.015 8.253.107.698-.49 1.274-1.215 1.274-.725 0-1.299-.58-1.456-1.268-.717-3.135-4.04-5.703-8.344-5.703Zm-33.568 3.42c0-.144-.19-.222-.28-.107a6.322 6.322 0 0 0-1.256 2.713c-.108.575-.585 1.053-1.186 1.053h-.225c-.724 0-1.322-.576-1.215-1.274.733-4.786 5.54-8.253 11.015-8.253 5.476 0 10.283 3.467 11.016 8.253.107.698-.49 1.274-1.215 1.274-.725 0-1.298-.58-1.456-1.268-.716-3.137-4.038-5.703-8.345-5.703-.39 0-.534.539-.272.822.609.658.98 1.532.98 2.49 0 2.048-1.693 3.707-3.78 3.707-2.088 0-3.78-1.66-3.78-3.707Zm24.49 8.94c.512-.5 1.303-.742 1.939-.404.636.339.877 1.125.419 1.671-1.493 1.78-3.909 2.909-6.574 2.909-2.663 0-5.085-1.117-6.58-2.91-.456-.548-.212-1.333.425-1.67.638-.336 1.428-.09 1.94.41.984.963 2.479 1.614 4.215 1.614 1.732 0 3.228-.657 4.216-1.62Z",fill:t})})})}},36644:function(e,t,r){"use strict";r.d(t,{R:function(){return X}});var n=r(59499),o=r(4730),a=r(49501),s=r(42833),i=r(64232),c=r(81719),l=r(62097),d=r(61225),p=r(70918),u=r(29630),x=r(30120),h=r(91655),v=r(75084),j=r(81645),f=r(86777),m=r(90244),g=r(69417),y=r(7272),b=r(39807),Z=r(93978),w=r(40849),O=r(56713),P=r(44304),C=r(69331),D=r(88622),k=r(8656),V=r(34841),E=r(57609),I=r(85893),A=["node"],N=["node"],M=["node"],F=["node"],S=["node"],R=["node"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=(0,c.ZP)("img")({display:"block",margin:"0 auto",maxWidth:"100%"}),Y=(0,c.ZP)("a")({color:"inherit"}),X=function(e){var t=e.proposal,r=e.loading,n=e.error,c=(0,k.Yh)((function(e){return e.trackEvent})),_=(0,l.Z)(),X=_.breakpoints,T=_.palette,q=(0,d.Z)(X.up("lg"));return(0,I.jsxs)(p.Z,{sx:{px:6,pt:4,pb:12},"data-cy":"vote-info-body",children:[(0,I.jsx)(u.Z,{variant:"h3",children:(0,I.jsx)(a.cC,{id:"Proposal overview"})}),n?(0,I.jsx)(x.Z,{sx:{px:{md:18},pt:8},children:(0,I.jsx)(C.v,{severity:"error",children:(0,I.jsx)(a.cC,{id:"An error has occurred fetching the proposal."})})}):(0,I.jsxs)(x.Z,{sx:{px:{md:18},pt:8,wordBreak:"break-word"},children:[t?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{variant:"h2",sx:{mb:6},children:t.proposal.proposalMetadata.title||(0,I.jsx)(h.Z,{})}),(0,I.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,I.jsx)(x.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},children:(0,I.jsx)(x.Z,{sx:{mr:"24px",mb:{xs:"2px",sm:0}},children:(0,I.jsx)(D.Ul,{state:t.proposal.state,loading:r})})}),(0,I.jsx)(x.Z,{sx:{flexGrow:1}}),(0,I.jsx)(v.Z,{component:"a",sx:{minWidth:q?"160px":""},target:"_blank",rel:"noopener",onClick:function(){return c(E.vh.EXTERNAL_LINK,{AIP:t.proposal.id,Link:"Raw Ipfs"})},href:"".concat(V.CA,"/").concat(t.proposal.proposalMetadata.ipfsHash),startIcon:(0,I.jsx)(j.Z,{sx:{"& path":{strokeWidth:"1"}},children:(0,I.jsx)(s.Z,{})}),children:q&&(0,I.jsx)(a.cC,{id:"Raw-Ipfs"})}),(0,I.jsx)(v.Z,{component:"a",sx:{minWidth:q?"160px":""},target:"_blank",rel:"noopener noreferrer",onClick:function(){return c(E.vh.EXTERNAL_LINK,{AIP:t.proposal.id,Link:"Share on twitter"})},href:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(t.proposal.proposalMetadata.title),"&url=").concat(window.location.href),startIcon:(0,I.jsx)(i.Z,{}),children:q&&(0,I.jsx)(a.cC,{id:"Share on twitter"})}),(0,I.jsx)(v.Z,{sx:{minWidth:q?"160px":""},component:"a",target:"_blank",rel:"noopener noreferrer",onClick:function(){return c(E.vh.EXTERNAL_LINK,{AIP:t.proposal.id,Link:"Share on lens"})},href:"https://hey.xyz/?url=".concat(window.location.href,"&text=Check out this proposal on aave governance \ud83d\udc7b\ud83d\udc7b - ").concat(t.proposal.proposalMetadata.title,"&hashtags=Aave&preview=true"),startIcon:(0,I.jsx)(P.M,{color:"dark"===T.mode?T.primary.light:T.text.primary}),children:q&&(0,I.jsx)(a.cC,{id:"Share on Lens"})})]})]}):(0,I.jsx)(u.Z,{variant:"buttonL",children:(0,I.jsx)(h.Z,{})}),t?(0,I.jsx)(w.D,{remarkPlugins:[O.Z],components:{table:function(e){e.node;var t=(0,o.Z)(e,A);return(0,I.jsx)(f.Z,{component:p.Z,variant:"outlined",children:(0,I.jsx)(m.Z,L(L({},t),{},{sx:{wordBreak:"normal"}}))})},tr:function(e){e.node;var t=(0,o.Z)(e,N);return(0,I.jsx)(g.Z,L({sx:{"&:last-child td, &:last-child th":{border:0}}},t))},td:function(e){var t=e.children,r=e.style;return(0,I.jsx)(y.Z,{style:r,children:t})},th:function(e){var t=e.children,r=e.style;return(0,I.jsx)(y.Z,{style:r,children:t})},tbody:function(e){var t=e.children;return(0,I.jsx)(b.Z,{children:t})},thead:function(e){e.node;var t=(0,o.Z)(e,M);return(0,I.jsx)(Z.Z,L({},t))},img:function(e){var t=e.src,r=e.alt;if(!t)return null;var n=/^\.\.\//.test(t)?t.replace("../","https://raw.githubusercontent.com/aave/aip/main/content/"):t;return(0,I.jsx)(B,{src:n,alt:r})},a:function(e){e.node;var t=(0,o.Z)(e,F);return(0,I.jsx)(Y,L({},t))},h2:function(e){e.node;var t=(0,o.Z)(e,S);return(0,I.jsx)(u.Z,L({variant:"subheader1",sx:{mt:6},gutterBottom:!0},t))},p:function(e){e.node;var t=(0,o.Z)(e,R);return(0,I.jsx)(u.Z,L({variant:"description"},t))}},children:t.proposal.proposalMetadata.description}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.Z,{variant:"text",sx:{my:4}}),(0,I.jsx)(h.Z,{variant:"rectangular",height:200,sx:{my:4}}),(0,I.jsx)(h.Z,{variant:"text",sx:{my:4}}),(0,I.jsx)(h.Z,{variant:"rectangular",height:400,sx:{my:4}})]})]})]})}},11065:function(e,t,r){"use strict";r.d(t,{S:function(){return x}});var n=r(49501),o=r(93973),a=r(30120),s=r(75084),i=r(81645),c=(r(67294),r(68861)),l=r(8656),d=r(57609),p=r(74815),u=r(85893),x=function(){var e=(0,l.Yh)((function(e){return e.trackEvent}));return(0,u.jsx)(p.f,{children:(0,u.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",mb:"18px"},children:(0,u.jsx)(s.Z,{component:c.rU,href:c.Z6.governance,variant:"surface",size:"medium",onClick:function(){return e(d.cD.GO_BACK)},color:"primary",startIcon:(0,u.jsx)(i.Z,{fontSize:"small",children:(0,u.jsx)(o.Z,{})}),children:(0,u.jsx)(n.cC,{id:"Go Back"})})})})}},90638:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/governance/v3/proposal",function(){return r(88215)}])}},function(e){e.O(0,[6146,7529,4653,7406,7715,2284,7808,8795,861,7566,4815,1430,9774,2888,179],(function(){return t=90638,e(e.s=t);var t}));var t=e.O();_N_E=t}]);