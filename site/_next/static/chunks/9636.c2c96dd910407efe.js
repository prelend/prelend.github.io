"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9636],{59786:function(e,r,n){n.r(r),n.d(r,{GovRepresentativesModal:function(){return F}});var t=n(31959),i=n(8195),a=n(90116),o=n(59499),s=n(17674),c=n(49501),l=n(6022),u=n(21386),d=n(30120),p=n(9144),v=n(29630),f=n(22841),x=n(75158),h=n(84246),m=n(56371),j=n(67294),b=n(77537),y=n(72399),g=n(8656),O=n(34841),P=n(63206),w=n(55200),k=n(67916),Z=n(78944),C=n(35643),I=n(10343),T=n(50029),E=n(87794),A=n.n(E),D=n(30194),S=n(39771),R=n(31001),M=n(16540),B=n(67489),z=n(85893);function L(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function _(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?L(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var N=function(e){var r=e.blocked,n=e.isWrongNetwork,t=e.representatives,a=(0,i.vR)(),o=a.mainTxState,l=a.setMainTxState,u=a.setTxError,d=a.setGasLimit,p=(0,M.z)().governanceV3Service,v=(0,b.Z)().sendTx,f=(0,g.Yh)((function(e){return[e.account,e.estimateGasLimit,e.addTransaction]})),x=(0,s.Z)(f,3),h=x[0],m=x[1],j=x[2],O=function(){var e=(0,T.Z)(A().mark((function e(){var r,n,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(_(_({},o),{},{loading:!0})),e.prev=1,r=p.updateRepresentativesForChain(h,t.map((function(e){return{chainId:e.chainId,representative:""===e.representative||e.remove?y.r_:e.representative}}))),e.next=5,m(r);case 5:return r=e.sent,e.next=8,v(r);case 8:return n=e.sent,e.next=11,n.wait(1);case 11:l({txHash:n.hash,loading:!1,success:!0}),j(n.hash,{action:"change representative",txState:"success"}),D.queryClient.invalidateQueries({queryKey:R.B.governanceRepresentatives(h)}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),i=(0,S.WG)(e.t0,S.aD.GAS_ESTIMATION,!1),u(i),l({txHash:void 0,loading:!1});case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return d("100000"),(0,z.jsx)(B.B,{requiresApproval:!1,blocked:r,mainTxState:o,preparingTransactions:!1,handleAction:O,actionText:(0,z.jsx)(c.cC,{id:"Confirm transaction"}),actionInProgressText:(0,z.jsx)(c.cC,{id:"Confirming transaction"}),isWrongNetwork:n})};function q(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function H(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?q(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var W=function(e){var r=e.representatives,n=(0,i.vR)(),t=n.mainTxState,o=n.txError,T=(0,b.Z)(),E=T.chainId,A=T.readOnlyModeAddress,D=(0,g.Yh)((function(e){return[e.currentNetworkConfig,e.currentChainId]})),S=(0,s.Z)(D,2),R=S[0],M=S[1],B=(0,j.useState)(r.map((function(e){return e.representative===y.r_?H(H({},e),{},{representative:"",remove:!1}):H(H({},e),{},{remove:!1})}))),L=B[0],_=B[1],q=R.isFork&&R.underlyingChainId===O.B2.coreChainId?M:O.B2.coreChainId,W=E!==q,F=(0,P.Mo)(q),V=L.some((function(e){return""!==e.representative&&!e.remove&&!(0,m.isAddress)(e.representative)})),G=L.some((function(e){var n=r.find((function(r){return r.chainId===e.chainId}));return!!n&&(e.remove&&n.representative!==y.r_||n.representative!==e.representative&&""!==e.representative)}));return t.success?(0,z.jsx)(w.R,{txHash:t.txHash,children:(0,z.jsx)(z.Fragment,{})}):(0,z.jsxs)(d.Z,{sx:{m:-3},children:[(0,z.jsx)(d.Z,{sx:{p:3},children:(0,z.jsx)(Z.E,{title:"Edit address"})}),W&&!A&&(0,z.jsx)(I.I,{networkName:F.name,chainId:q}),(0,z.jsx)(p.Z,{direction:"column",gap:2,children:L.map((function(e,r){return(0,z.jsx)(d.Z,{sx:function(e){return{border:L[r].remove?"1px solid ".concat(e.palette.action.active):"1px solid transparent",borderRadius:"8px",background:L[r].remove?e.palette.background.surface:"transparent"}},children:(0,z.jsxs)(p.Z,{gap:2,sx:{px:3,py:3},children:[(0,z.jsxs)(p.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(p.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,z.jsx)("img",{src:P.m5[e.chainId].networkLogoPath,height:"16px",width:"16px",alt:"network logo"}),(0,z.jsx)(v.Z,{variant:"description",color:"text.secondary",children:P.m5[e.chainId].name})]}),(0,z.jsx)(f.Z,{sx:{mr:0},label:(0,z.jsx)(v.Z,{sx:{mr:1},variant:"subheader1",color:"error.main",children:(0,z.jsx)(c.cC,{id:"Remove"})}),labelPlacement:"start",control:(0,z.jsx)(x.Z,{sx:{width:"16px",height:"16px"},checked:L[r].remove,onChange:function(e){_((function(n){var t=(0,a.Z)(n);return t[r].remove=e.target.checked,t}))},size:"small"})})]}),(0,z.jsx)(h.Z,{sx:{height:"44px"},placeholder:l.ag._("Enter ETH address"),value:e.representative,error:e.invalid&&!e.remove,disabled:e.remove,fullWidth:!0,inputProps:{sx:{py:2,px:3,fontSize:"14px"}},endAdornment:""===e.representative||e.invalid?null:(0,z.jsx)(u.Z,{fontSize:"small",color:"success"}),onChange:function(e){!function(e,r){var n=(0,m.isAddress)(e);_((function(t){var i=(0,a.Z)(t);return i[r].representative=e,i[r].invalid=""!==e&&!n,i}))}(e.target.value,r)}}),(0,z.jsx)(v.Z,{sx:{visibility:e.invalid&&!e.remove?"visible":"hidden"},variant:"helperText",color:"error.main",children:(0,z.jsx)(c.cC,{id:"Can't validate the wallet address. Try again."})})]})},r)}))}),(0,z.jsxs)(d.Z,{sx:{px:3,pb:3},children:[(0,z.jsx)(C.g,{disabled:V||!G,gasLimit:(0,m.parseUnits)("1000000","wei"),chainId:O.B2.coreChainId}),o&&(0,z.jsx)(k.Q,{txError:o}),(0,z.jsx)(N,{blocked:V||!G,isWrongNetwork:!1,representatives:L})]})]})},F=function(){var e=(0,i.vR)(),r=e.type,n=e.close,a=e.args;return(0,z.jsx)(t.P,{open:r===i.w8.GovRepresentatives,setOpen:n,children:a.representatives&&(0,z.jsx)(W,{representatives:a.representatives})})}},67489:function(e,r,n){n.d(r,{B:function(){return H}});var t=n(59499),i=n(4730),a=n(49501),o=n(58057),s=n(81645),c=n(30120),l=n(75084),u=n(90149),d=n(29630),p=n(8195),v=n(77537),f=n(39771),x=n(36864),h=n(68861),m=n(58527),j=n(85893);function b(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=function(e){var r=(0,x.Z)({},e);return(0,j.jsx)(m.G,y(y({},r),{},{children:(0,j.jsx)(a.cC,{id:"To continue, you need to grant Aave smart contracts permission to move your funds from your wallet. Depending on the asset and wallet you use, it is done by signing the permission message (gas free), or by submitting an approval transaction (requires gas). <0>Learn more</0>",components:{0:(0,j.jsx)(h.rU,{href:"https://eips.ethereum.org/EIPS/eip-2612",underline:"always"})}})}))},O=n(56365),P=n(68346),w=n(17674),k=n(64343),Z=n(22659),C=n(73812),I=n(31538),T=n(61702),E=n(29894),A=n(67294),D=n(32113),S=function(e){var r=e.currentMethod,n=e.setMethod,t=A.useState(null),i=(0,w.Z)(t,2),o=i[0],l=i[1],u=Boolean(o),p=function(){l(null)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.Z,{onClick:function(e){l(e.currentTarget)},sx:{display:"flex",alignItems:"center",cursor:"pointer"},"data-cy":"approveButtonChange",children:[(0,j.jsx)(d.Z,{variant:"subheader2",color:"info.main",children:(0,j.jsx)(a.cC,{id:"{currentMethod}",values:{currentMethod:r}})}),(0,j.jsx)(s.Z,{sx:{fontSize:16,ml:1,color:"info.main"},children:(0,j.jsx)(Z.Z,{})})]}),(0,j.jsxs)(C.Z,{anchorEl:o,open:u,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},keepMounted:!0,"data-cy":"approveMenu_".concat(r),children:[(0,j.jsxs)(I.Z,{"data-cy":"approveOption_".concat(D.n.PERMIT),selected:r===D.n.PERMIT,value:D.n.PERMIT,onClick:function(){r===D.n.APPROVE&&n(D.n.PERMIT),p()},children:[(0,j.jsx)(T.Z,{primaryTypographyProps:{variant:"subheader1"},children:(0,j.jsx)(a.cC,{id:"{0}",values:{0:D.n.PERMIT}})}),(0,j.jsx)(E.Z,{children:(0,j.jsx)(s.Z,{children:r===D.n.PERMIT&&(0,j.jsx)(k.Z,{})})})]}),(0,j.jsxs)(I.Z,{"data-cy":"approveOption_".concat(D.n.APPROVE),selected:r===D.n.APPROVE,value:D.n.APPROVE,onClick:function(){r===D.n.PERMIT&&n(D.n.APPROVE),p()},children:[(0,j.jsx)(T.Z,{primaryTypographyProps:{variant:"subheader1"},children:(0,j.jsx)(a.cC,{id:"{0}",values:{0:D.n.APPROVE}})}),(0,j.jsx)(E.Z,{children:(0,j.jsx)(s.Z,{children:r===D.n.APPROVE&&(0,j.jsx)(k.Z,{})})})]})]})]})},R=n(89291),M=n(46930),B=n(8656),z=function(){return(0,j.jsx)(s.Z,{sx:{ml:"2px",fontSize:"11px"},children:(0,j.jsx)(O.Z,{})})},L=function(e){var r=e.approvalHash,n=e.tryPermit,t=(0,B.Yh)(),i=t.walletApprovalMethodPreference,o=t.setWalletApprovalMethodPreference,s=n&&i,l=(0,M.f)().currentNetworkConfig,u=r===R.Z;return r||u||!n?r&&!s?(0,j.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",pb:1},children:r&&(0,j.jsxs)(P.Z,{variant:"helperText",href:l.explorerLinkBuilder({tx:r}),sx:{display:"inline-flex",alignItems:"center"},underline:"hover",target:"_blank",rel:"noreferrer noopener",children:[(0,j.jsx)(a.cC,{id:"Review approval tx details"}),(0,j.jsx)(z,{})]})}):(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)(c.Z,{sx:{display:"inline-flex",alignItems:"center",mb:2},children:[(0,j.jsxs)(d.Z,{variant:"subheader2",color:"text.secondary",children:[(0,j.jsx)(a.cC,{id:"Approve with"}),"\xa0"]}),(0,j.jsx)(S,{currentMethod:i,setMethod:function(e){return o(e)}})]})},_=["actionInProgressText","actionText","amount","approvalTxState","handleApproval","handleAction","isWrongNetwork","mainTxState","preparingTransactions","requiresAmount","requiresApproval","sx","symbol","blocked","fetchingData","errorParams","tryPermit","event"];function N(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function q(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var H=function(e){var r=e.actionInProgressText,n=e.actionText,t=e.amount,x=e.approvalTxState,h=e.handleApproval,m=e.handleAction,b=e.isWrongNetwork,y=e.mainTxState,O=e.preparingTransactions,P=e.requiresAmount,w=e.requiresApproval,k=e.sx,Z=e.symbol,C=e.blocked,I=e.fetchingData,T=void 0!==I&&I,E=e.errorParams,A=e.tryPermit,D=(e.event,(0,i.Z)(e,_)),S=(0,p.vR)().txError,R=(0,v.Z)().readOnlyModeAddress,M=w&&(null===S||void 0===S?void 0:S.txAction)===f.aD.APPROVAL&&(null===S||void 0===S?void 0:S.actionBlocked),B=P&&P&&0===Number(t);var z=C?{disabled:!0,content:n}:(null===S||void 0===S?void 0:S.txAction)!==f.aD.GAS_ESTIMATION&&(null===S||void 0===S?void 0:S.txAction)!==f.aD.MAIN_ACTION||null===S||void 0===S||!S.actionBlocked?b?{disabled:!0,content:(0,j.jsx)(a.cC,{id:"Wrong Network"})}:T?{disabled:!0,content:(0,j.jsx)(a.cC,{id:"Fetching data..."})}:B?{disabled:!0,content:(0,j.jsx)(a.cC,{id:"Enter an amount"})}:O?{disabled:!0,loading:!0}:null!==y&&void 0!==y&&y.loading?{loading:!0,disabled:!0,content:r}:!w||null!==x&&void 0!==x&&x.success?{content:n,handleClick:m}:{disabled:!0,content:n}:E||{loading:!1,disabled:!0,content:n},N=z.content,H=z.disabled,W=z.loading,F=z.handleClick,V=!w||b||B||O||M?null:null!==x&&void 0!==x&&x.loading?{loading:!0,disabled:!0,content:(0,j.jsx)(a.cC,{id:"Approving {symbol}...",values:{symbol:Z}})}:null!==x&&void 0!==x&&x.success?{disabled:!0,content:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.cC,{id:"Approve Confirmed"}),(0,j.jsx)(s.Z,{sx:{fontSize:20,ml:2},children:(0,j.jsx)(o.Z,{})})]})}:{content:(0,j.jsx)(g,{variant:"buttonL",iconSize:20,iconMargin:2,color:"white",text:(0,j.jsx)(a.cC,{id:"Approve {symbol} to continue",values:{symbol:Z}})}),handleClick:h};return(0,j.jsxs)(c.Z,q(q({sx:q({display:"flex",flexDirection:"column",mt:12},k)},D),{},{children:[V&&!R&&(0,j.jsx)(c.Z,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:(0,j.jsx)(L,{approvalHash:null===x||void 0===x?void 0:x.txHash,tryPermit:A})}),V&&!R&&(0,j.jsxs)(l.Z,{variant:"contained",disabled:V.disabled||C,onClick:function(){return V.handleClick&&V.handleClick()},size:"large",sx:{minHeight:"44px"},"data-cy":"approvalButton",children:[V.loading&&(0,j.jsx)(u.Z,{color:"inherit",size:"16px",sx:{mr:2}}),V.content]}),(0,j.jsxs)(l.Z,{variant:"contained",disabled:H||C||void 0!==R,onClick:F,size:"large",sx:q({minHeight:"44px"},V?{mt:2}:{}),"data-cy":"actionButton",children:[W&&(0,j.jsx)(u.Z,{color:"inherit",size:"16px",sx:{mr:2}}),N]}),R&&(0,j.jsx)(d.Z,{variant:"helperText",color:"warning.main",sx:{textAlign:"center",mt:2},children:(0,j.jsx)(a.cC,{id:"Read-only mode. Connect to a wallet to perform transactions."})})]}))}},80664:function(e,r,n){n.d(r,{P:function(){return v}});var t=n(80854),i=n(1279),a=n(81206),o=n(82403),s=n(70794),c=n(8656),l=n(63206),u=n(52369),d=n(45257),p=function(e){var r=(0,c.Yh)((function(e){return e.account})),n=(0,d._)(e,r),p=(0,u.T)(e),v=n.find((function(e){return e.isLoading}))||p.find((function(e){return e.isLoading}));return{walletBalances:p.map((function(r,c){var u;return function(e){var r=e.reservesHumanized,n=e.balances,c=e.marketData,u=(null===r||void 0===r?void 0:r.reservesData)||[],d=(null===r||void 0===r?void 0:r.baseCurrencyData)||{marketReferenceCurrencyDecimals:0,marketReferenceCurrencyPriceInUsd:"0",networkBaseTokenPriceInUsd:"0",networkBaseTokenPriceDecimals:0},p=!0;return{walletBalances:(null!==n&&void 0!==n?n:[]).reduce((function(e,r){var n=u.find((function(e){var n;return r.address===t.hP.toLowerCase()?e.symbol.toLowerCase()===(null===(n=l.m5[c.chainId].wrappedBaseAssetSymbol)||void 0===n?void 0:n.toLowerCase()):e.underlyingAsset.toLowerCase()===r.address}));return"0"!==r.amount&&(p=!1),n&&(e[r.address]={amount:(0,i.Fv)(r.amount,n.decimals),amountUSD:(0,a.Z)({amount:new s.O(r.amount),currencyDecimals:n.decimals,priceInMarketReferenceCurrency:n.priceInMarketReferenceCurrency,marketReferenceCurrencyDecimals:d.marketReferenceCurrencyDecimals,normalizedMarketReferencePriceInUsd:(0,i.Fv)(d.marketReferenceCurrencyPriceInUsd,o.$3)})}),e}),{}),hasEmptyWallet:p}}({reservesHumanized:r.data,balances:null===(u=n[c])||void 0===u?void 0:u.data,marketData:e[c]})})),isLoading:v}},v=function(e){var r=p([e]),n=r.walletBalances,t=r.isLoading;return{walletBalances:n[0].walletBalances,hasEmptyWallet:n[0].hasEmptyWallet,loading:t}}},52369:function(e,r,n){n.d(r,{T:function(){return c},J:function(){return l}});var t=n(59499),i=n(87669),a=n(31001),o=n(16540);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var c=function(e,r){var n=(0,o.z)().uiPoolService;return(0,i.h)({queries:e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({queryKey:a.B.poolReservesDataHumanized(e),queryFn:function(){return n.getReservesHumanized(e)},refetchInterval:a.g,meta:{}},r)}))})},l=function(e){return c([e])[0]}},45257:function(e,r,n){n.d(r,{_:function(){return c}});var t=n(59499),i=n(87669),a=(n(8656),n(31001)),o=n(16540);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var c=function(e,r,n){var c=(0,o.z)().poolTokensBalanceService;return(0,i.h)({queries:e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({queryKey:a.B.poolTokens(r,e),queryFn:function(){return c.getPoolTokensBalances(e,r)},enabled:!!r,refetchInterval:a.g},n)}))})}}}]);